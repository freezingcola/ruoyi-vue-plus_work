import{aT as Re,d as ce,aq as le,V as ke,r as k,aH as Be,S as ie,i as De,j as Ie,o as U,c as ee,k as s,m as f,e as i,ad as Ae,y as j,M as ye,x as Y,T as re,q as M,a3 as me,ax as Se,ay as Fe,am as Ce,L as Ee,p as D,av as Me,aS as qe,a as Ge,Y as we,aa as He,b as Ke,$ as Je,w as B,t as ue,a7 as be,ab as Ye,D as Qe,C as We,as as Xe,G as Ze,H as et,a0 as tt,W as at,X as nt,a8 as ot,ac as lt,a9 as it,v as rt}from"./index-BoCONcAc.js";/* empty css                    */import{l as st,d as Ue,a as ut,_ as ct}from"./index-DG7XexN9.js";import{_ as dt}from"./index-B1KNwlHH.js";/* empty css                 *//* empty css                    *//* empty css                        *//* empty css               */import{_ as mt}from"./index-B4NenLWv.js";/* empty css               *//* empty css                *//* empty css                *//* empty css                       */import"./el-form-item-l0sNRNKZ.js";/* empty css                        *//* empty css                *//* empty css                */var Ve={exports:{}};(function(T,V){(function(u,o){T.exports=o()})(Re,function(){return function(u){var o={};function h(r){if(o[r])return o[r].exports;var p=o[r]={i:r,l:!1,exports:{}};return u[r].call(p.exports,p,p.exports,h),p.l=!0,p.exports}return h.m=u,h.c=o,h.d=function(r,p,S){h.o(r,p)||Object.defineProperty(r,p,{enumerable:!0,get:S})},h.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},h.t=function(r,p){if(1&p&&(r=h(r)),8&p||4&p&&typeof r=="object"&&r&&r.__esModule)return r;var S=Object.create(null);if(h.r(S),Object.defineProperty(S,"default",{enumerable:!0,value:r}),2&p&&typeof r!="string")for(var E in r)h.d(S,E,(function(q){return r[q]}).bind(null,E));return S},h.n=function(r){var p=r&&r.__esModule?function(){return r.default}:function(){return r};return h.d(p,"a",p),p},h.o=function(r,p){return Object.prototype.hasOwnProperty.call(r,p)},h.p="",h(h.s=0)}([function(u,o,h){var r;function p(n){return["image/png","image/jpeg","image/gif"].some(t=>t===n)}h.r(o),h.d(o,"canvastoDataURL",function(){return E}),h.d(o,"canvastoFile",function(){return q}),h.d(o,"dataURLtoFile",function(){return A}),h.d(o,"dataURLtoImage",function(){return C}),h.d(o,"downloadFile",function(){return L}),h.d(o,"filetoDataURL",function(){return N}),h.d(o,"imagetoCanvas",function(){return x}),h.d(o,"urltoBlob",function(){return Q}),h.d(o,"urltoImage",function(){return W}),h.d(o,"compress",function(){return te}),h.d(o,"compressAccurately",function(){return w}),h.d(o,"EImageType",function(){return r}),function(n){n.PNG="image/png",n.JPEG="image/jpeg",n.GIF="image/gif"}(r||(r={}));var S=function(n,t,a,e){return new(a||(a=Promise))(function(l,_){function y(g){try{I(e.next(g))}catch(c){_(c)}}function b(g){try{I(e.throw(g))}catch(c){_(c)}}function I(g){var c;g.done?l(g.value):(c=g.value,c instanceof a?c:new a(function($){$(c)})).then(y,b)}I((e=e.apply(n,[])).next())})};function E(n,t=.92,a=r.JPEG){return S(this,void 0,void 0,function*(){return p(a)||(a=r.JPEG),n.toDataURL(a,t)})}function q(n,t=.92,a=r.JPEG){return new Promise(e=>n.toBlob(l=>e(l),a,t))}var G=function(n,t,a,e){return new(a||(a=Promise))(function(l,_){function y(g){try{I(e.next(g))}catch(c){_(c)}}function b(g){try{I(e.throw(g))}catch(c){_(c)}}function I(g){var c;g.done?l(g.value):(c=g.value,c instanceof a?c:new a(function($){$(c)})).then(y,b)}I((e=e.apply(n,[])).next())})};function A(n,t){return G(this,void 0,void 0,function*(){const a=n.split(",");let e=a[0].match(/:(.*?);/)[1];const l=atob(a[1]);let _=l.length;const y=new Uint8Array(_);for(;_--;)y[_]=l.charCodeAt(_);return p(t)&&(e=t),new Blob([y],{type:e})})}function C(n){return new Promise((t,a)=>{const e=new Image;e.onload=()=>t(e),e.onerror=()=>a(new Error("dataURLtoImage(): dataURL is illegal")),e.src=n})}function L(n,t){const a=document.createElement("a");a.href=window.URL.createObjectURL(n),a.download=t||Date.now().toString(36),document.body.appendChild(a);const e=document.createEvent("MouseEvents");e.initEvent("click",!1,!1),a.dispatchEvent(e),document.body.removeChild(a)}function N(n){return new Promise(t=>{const a=new FileReader;a.onloadend=e=>t(e.target.result),a.readAsDataURL(n)})}var P=function(n,t,a,e){return new(a||(a=Promise))(function(l,_){function y(g){try{I(e.next(g))}catch(c){_(c)}}function b(g){try{I(e.throw(g))}catch(c){_(c)}}function I(g){var c;g.done?l(g.value):(c=g.value,c instanceof a?c:new a(function($){$(c)})).then(y,b)}I((e=e.apply(n,[])).next())})};function x(n,t={}){return P(this,void 0,void 0,function*(){const a=Object.assign({},t),e=document.createElement("canvas"),l=e.getContext("2d");let _,y;for(const b in a)Object.prototype.hasOwnProperty.call(a,b)&&(a[b]=Number(a[b]));if(a.scale){const b=a.scale>0&&a.scale<10?a.scale:1;y=n.width*b,_=n.height*b}else y=a.width||a.height*n.width/n.height||n.width,_=a.height||a.width*n.height/n.width||n.height;switch([5,6,7,8].some(b=>b===a.orientation)?(e.height=y,e.width=_):(e.height=_,e.width=y),a.orientation){case 3:l.rotate(180*Math.PI/180),l.drawImage(n,-e.width,-e.height,e.width,e.height);break;case 6:l.rotate(90*Math.PI/180),l.drawImage(n,0,-e.width,e.height,e.width);break;case 8:l.rotate(270*Math.PI/180),l.drawImage(n,-e.height,0,e.height,e.width);break;case 2:l.translate(e.width,0),l.scale(-1,1),l.drawImage(n,0,0,e.width,e.height);break;case 4:l.translate(e.width,0),l.scale(-1,1),l.rotate(180*Math.PI/180),l.drawImage(n,-e.width,-e.height,e.width,e.height);break;case 5:l.translate(e.width,0),l.scale(-1,1),l.rotate(90*Math.PI/180),l.drawImage(n,0,-e.width,e.height,e.width);break;case 7:l.translate(e.width,0),l.scale(-1,1),l.rotate(270*Math.PI/180),l.drawImage(n,-e.height,0,e.height,e.width);break;default:l.drawImage(n,0,0,e.width,e.height)}return e})}function Q(n){return fetch(n).then(t=>t.blob())}function W(n){return new Promise((t,a)=>{const e=new Image;e.onload=()=>t(e),e.onerror=()=>a(new Error("urltoImage(): Image failed to load, please check the image URL")),e.src=n})}var H=function(n,t,a,e){return new(a||(a=Promise))(function(l,_){function y(g){try{I(e.next(g))}catch(c){_(c)}}function b(g){try{I(e.throw(g))}catch(c){_(c)}}function I(g){var c;g.done?l(g.value):(c=g.value,c instanceof a?c:new a(function($){$(c)})).then(y,b)}I((e=e.apply(n,[])).next())})};function te(n,t={}){return H(this,void 0,void 0,function*(){if(!(n instanceof Blob))throw new Error("compress(): First arg must be a Blob object or a File object.");if(typeof t!="object"&&(t=Object.assign({quality:t})),t.quality=Number(t.quality),Number.isNaN(t.quality))return n;const a=yield N(n);let e=a.split(",")[0].match(/:(.*?);/)[1],l=r.JPEG;p(t.type)&&(l=t.type,e=t.type);const _=yield C(a),y=yield x(_,Object.assign({},t)),b=yield E(y,t.quality,l),I=yield A(b,e);return I.size>n.size?n:I})}function w(n,t={}){return H(this,void 0,void 0,function*(){if(!(n instanceof Blob))throw new Error("compressAccurately(): First arg must be a Blob object or a File object.");if(typeof t!="object"&&(t=Object.assign({size:t})),t.size=Number(t.size),Number.isNaN(t.size)||1024*t.size>n.size)return n;t.accuracy=Number(t.accuracy),(!t.accuracy||t.accuracy<.8||t.accuracy>.99)&&(t.accuracy=.95);const a=t.size*(2-t.accuracy)*1024,e=1024*t.size,l=t.size*t.accuracy*1024,_=yield N(n);let y=_.split(",")[0].match(/:(.*?);/)[1],b=r.JPEG;p(t.type)&&(b=t.type,y=t.type);const I=yield C(_),g=yield x(I,Object.assign({},t));let c,$=.5;const ae=[null,null];for(let K=1;K<=7;K++){c=yield E(g,$,b);const X=.75*c.length;if(K===7){(a<X||l>X)&&(c=[c,...ae].filter(ne=>ne).sort((ne,de)=>Math.abs(.75*ne.length-e)-Math.abs(.75*de.length-e))[0]);break}if(a<X)ae[1]=c,$-=Math.pow(.5,K+1);else{if(!(l>X))break;ae[0]=c,$+=Math.pow(.5,K+1)}}const se=yield A(c,y);return se.size>n.size?n:se})}}])})})(Ve);var ft=Ve.exports,pt=ft;const ht={class:"component-upload-image"},gt={key:0,class:"el-upload__tip"},vt={style:{color:"#f56c6c"}},_t={style:{color:"#f56c6c"}},yt=["src"],wt=ce({__name:"index",props:{modelValue:{type:[String,Object,Array],default:()=>[]},limit:le.number.def(5),fileSize:le.number.def(5),fileType:le.array.def(["png","jpg","jpeg"]),isShowTip:{type:Boolean,default:!0},compressSupport:{type:Boolean,default:!1},compressTargetSize:le.number.def(300)},emits:["update:modelValue"],setup(T,{emit:V}){const u=T,{proxy:o}=ke(),h=V,r=k(0),p=k([]),S=k(""),E=k(!1),G=k("/zzkj-oa"+"/resource/oss/upload"),A=k(Be()),C=k([]),L=ie(()=>u.isShowTip&&(u.fileType||u.fileSize)),N=k();De(()=>u.modelValue,async t=>{if(t){let a=[];Array.isArray(t)?a=t:a=(await st(t)).data,C.value=a.map(e=>{let l;return typeof e=="string"?l={name:e,url:e}:l={name:e.ossId,url:e.url,ossId:e.ossId},l})}else return C.value=[],[]},{deep:!0,immediate:!0});const P=t=>{let a=!1;if(u.fileType.length){let e="";t.name.lastIndexOf(".")>-1&&(e=t.name.slice(t.name.lastIndexOf(".")+1)),a=u.fileType.some(l=>!!(t.type.indexOf(l)>-1||e&&e.indexOf(l)>-1))}else a=t.type.indexOf("image")>-1;if(!a)return o==null||o.$modal.msgError(`文件格式不正确, 请上传${u.fileType.join("/")}图片格式文件!`),!1;if(u.fileSize&&!(t.size/1024/1024<u.fileSize))return o==null||o.$modal.msgError(`上传头像图片大小不能超过 ${u.fileSize} MB!`),!1;if(u.compressSupport&&t.size/1024>u.compressTargetSize)return o==null||o.$modal.loading("正在上传图片，请稍候..."),r.value++,pt.compressAccurately(t,u.compressTargetSize);o==null||o.$modal.loading("正在上传图片，请稍候..."),r.value++},x=()=>{o==null||o.$modal.msgError(`上传文件数量不能超过 ${u.limit} 个!`)},Q=(t,a)=>{var e;t.code===200?(p.value.push({name:t.data.fileName,url:t.data.url,ossId:t.data.ossId}),H()):(r.value--,o==null||o.$modal.closeLoading(),o==null||o.$modal.msgError(t.msg),(e=N.value)==null||e.handleRemove(a),H())},W=t=>{const a=C.value.map(e=>e.name).indexOf(t.name);if(a>-1&&p.value.length===r.value){let e=C.value[a].ossId;return Ue(e),C.value.splice(a,1),h("update:modelValue",n(C.value)),!1}return!0},H=()=>{r.value>0&&p.value.length===r.value&&(C.value=C.value.filter(t=>t.url!==void 0).concat(p.value),p.value=[],r.value=0,h("update:modelValue",n(C.value)),o==null||o.$modal.closeLoading())},te=()=>{o==null||o.$modal.msgError("上传图片失败"),o==null||o.$modal.closeLoading()},w=t=>{S.value=t.url,E.value=!0},n=(t,a)=>{let e="";a=a||",";for(let l in t)t[l].ossId!==void 0&&t[l].url.indexOf("blob:")!==0&&(e+=t[l].ossId+a);return e!=""?e.substring(0,e.length-1):""};return(t,a)=>{const e=Ie("plus"),l=Se,_=Fe,y=Ce;return U(),ee("div",ht,[s(_,{ref:"imageUpload",multiple:"",action:i(G),"list-type":"picture-card","on-success":Q,"before-upload":P,limit:T.limit,"on-error":te,"on-exceed":x,"before-remove":W,"show-file-list":!0,headers:i(A),"file-list":i(C),"on-preview":w,class:Ae({hide:i(C).length>=T.limit})},{default:f(()=>[s(l,{class:"avatar-uploader-icon"},{default:f(()=>[s(e)]),_:1})]),_:1},8,["action","limit","headers","file-list","class"]),i(L)?(U(),ee("div",gt,[j(" 请上传 "),T.fileSize?(U(),ee(ye,{key:0},[j(" 大小不超过 "),Y("b",vt,re(T.fileSize)+"MB",1)],64)):M("",!0),T.fileType?(U(),ee(ye,{key:1},[j(" 格式为 "),Y("b",_t,re(T.fileType.join("/")),1)],64)):M("",!0),j(" 的文件 ")])):M("",!0),s(y,{modelValue:i(E),"onUpdate:modelValue":a[0]||(a[0]=b=>me(E)?E.value=b:null),title:"预览",width:"800px","append-to-body":""},{default:f(()=>[Y("img",{src:i(S),style:{display:"block","max-width":"100%",margin:"0 auto"}},null,8,yt)]),_:1},8,["modelValue"])])}}}),bt=Ee(wt,[["__scopeId","data-v-2cd47c0a"]]),kt={class:"image-slot"},It=ce({__name:"index",props:{src:le.string.def(""),width:{type:[Number,String],default:""},height:{type:[Number,String],default:""}},setup(T){const V=T,u=ie(()=>V.src?V.src.split(",")[0]:void 0),o=ie(()=>{if(!V.src)return[];let p=V.src.split(","),S=[];return p.forEach(E=>{if(E.trim()!=="")return S.push(E)}),S}),h=ie(()=>typeof V.width=="string"?V.width:`${V.width}px`),r=ie(()=>typeof V.height=="string"?V.height:`${V.height}px`);return(p,S)=>{const E=Ie("picture-filled"),q=Se,G=qe;return U(),D(G,{src:`${i(u)}`,fit:"cover",style:Me(`width:${i(h)};height:${i(r)};`),"preview-src-list":i(o),"preview-teleported":""},{error:f(()=>[Y("div",kt,[s(q,null,{default:f(()=>[s(E)]),_:1})])]),_:1},8,["src","style","preview-src-list"])}}}),St=Ee(It,[["__scopeId","data-v-0d68eae2"]]),Ct={class:"p-2"},Et={class:"mb-[10px]"},Ut=["textContent"],Vt={class:"dialog-footer"},Ot=ce({name:"Oss"}),Kt=ce({...Ot,setup(T){const V=Ge(),{proxy:u}=ke(),o=k([]),h=k(!0),r=k(!1),p=k(!0),S=k(!0),E=k([]),q=k(!0),G=k(!0),A=k(0),C=k(0),L=k(!0),N=k(["",""]),P=we({visible:!1,title:""}),x=k({prop:"createTime",order:"ascending"}),Q=k(),W=k(),H={file:void 0},te=we({form:{...H},queryParams:{pageNum:1,pageSize:10,fileName:"",originalName:"",fileSuffix:"",createTime:"",service:"",orderByColumn:x.value.prop,isAsc:x.value.order},rules:{file:[{required:!0,message:"文件不能为空",trigger:"blur"}]}}),{queryParams:w,form:n,rules:t}=He(te),a=async()=>{p.value=!0;const d=await(u==null?void 0:u.getConfigKey("sys.oss.previewListResource"));L.value=(d==null?void 0:d.data)===void 0?!0:d.data==="true";const m=await ut(u==null?void 0:u.addDateRange(w.value,N.value,"CreateTime"));o.value=m.rows,A.value=m.total,p.value=!1,h.value=!0};function e(d){const m=[".png",".jpg",".jpeg"];return(Array.isArray(d)?d:[d]).some(O=>m.includes(O.toLowerCase()))}function l(){P.visible=!1,_()}function _(){var d;n.value={...H},(d=Q.value)==null||d.resetFields()}function y(){w.value.pageNum=1,a()}function b(){var d;h.value=!1,N.value=["",""],(d=W.value)==null||d.resetFields(),w.value.orderByColumn=x.value.prop,w.value.isAsc=x.value.order,y()}function I(d){E.value=d.map(m=>m.ossId),q.value=d.length!=1,G.value=!d.length}const g=({column:d})=>{d.order=d.multiOrder},c=d=>{if(d.sortable==="custom"){switch(d.multiOrder){case"descending":d.multiOrder="ascending";break;case"ascending":d.multiOrder="";break;default:d.multiOrder="descending";break}$(d.property,d.multiOrder)}},$=(d,m)=>{let R=w.value.orderByColumn?w.value.orderByColumn.split(","):[],O=w.value.isAsc?w.value.isAsc.split(","):[],Z=R.indexOf(d);Z!==-1?m?O[Z]=m:(O.splice(Z,1),R.splice(Z,1)):(R.push(d),O.push(m)),w.value.orderByColumn=R.join(","),w.value.isAsc=O.join(","),a()},ae=()=>{V.push("/system/oss-config/index")},se=()=>{_(),C.value=0,P.visible=!0,P.title="上传文件"},K=()=>{_(),C.value=1,P.visible=!0,P.title="上传图片"},X=()=>{P.visible=!1,a()},ne=d=>{u==null||u.$download.oss(d.ossId)},de=async d=>{let m=d?"启用":"停用";try{await(u==null?void 0:u.$modal.confirm('确认要"'+m+'""预览列表图片"配置吗?')),await(u==null?void 0:u.updateConfigByKey("sys.oss.previewListResource",d)),await a(),u==null||u.$modal.msgSuccess(m+"成功")}catch{return}},fe=async d=>{const m=(d==null?void 0:d.ossId)||E.value;await(u==null?void 0:u.$modal.confirm('是否确认删除OSS对象存储编号为"'+m+'"的数据项?')),p.value=!0,await Ue(m).finally(()=>p.value=!1),await a(),u==null||u.$modal.msgSuccess("删除成功")};return Ke(()=>{a()}),(d,m)=>{var ve,_e;const R=Qe,O=We,Z=Xe,z=Ze,pe=et,he=tt,oe=at,Oe=mt,Pe=nt,F=ot,ge=lt,$e=it,je=dt,Te=ct,Ne=bt,ze=Ce,J=Je("hasPermi"),Le=rt;return U(),ee("div",Ct,[s(Ye,{"enter-active-class":(ve=i(u))==null?void 0:ve.animate.searchAnimate.enter,"leave-active-class":(_e=i(u))==null?void 0:_e.animate.searchAnimate.leave},{default:f(()=>[B(Y("div",Et,[s(he,{shadow:"hover"},{default:f(()=>[s(pe,{ref_key:"queryFormRef",ref:W,model:i(w),inline:!0},{default:f(()=>[s(O,{label:"文件名",prop:"fileName"},{default:f(()=>[s(R,{modelValue:i(w).fileName,"onUpdate:modelValue":m[0]||(m[0]=v=>i(w).fileName=v),placeholder:"请输入文件名",clearable:"",onKeyup:ue(y,["enter"])},null,8,["modelValue"])]),_:1}),s(O,{label:"原名",prop:"originalName"},{default:f(()=>[s(R,{modelValue:i(w).originalName,"onUpdate:modelValue":m[1]||(m[1]=v=>i(w).originalName=v),placeholder:"请输入原名",clearable:"",onKeyup:ue(y,["enter"])},null,8,["modelValue"])]),_:1}),s(O,{label:"文件后缀",prop:"fileSuffix"},{default:f(()=>[s(R,{modelValue:i(w).fileSuffix,"onUpdate:modelValue":m[2]||(m[2]=v=>i(w).fileSuffix=v),placeholder:"请输入文件后缀",clearable:"",onKeyup:ue(y,["enter"])},null,8,["modelValue"])]),_:1}),s(O,{label:"创建时间",style:{width:"308px"}},{default:f(()=>[s(Z,{modelValue:i(N),"onUpdate:modelValue":m[3]||(m[3]=v=>me(N)?N.value=v:null),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,1,1,23,59,59)]},null,8,["modelValue","default-time"])]),_:1}),s(O,{label:"服务商",prop:"service"},{default:f(()=>[s(R,{modelValue:i(w).service,"onUpdate:modelValue":m[4]||(m[4]=v=>i(w).service=v),placeholder:"请输入服务商",clearable:"",onKeyup:ue(y,["enter"])},null,8,["modelValue"])]),_:1}),s(O,null,{default:f(()=>[s(z,{type:"primary",icon:"search",onClick:y},{default:f(()=>[j("搜索")]),_:1}),s(z,{icon:"Refresh",onClick:b},{default:f(()=>[j("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})],512),[[be,i(S)]])]),_:1},8,["enter-active-class","leave-active-class"]),s(he,{shadow:"hover"},{header:f(()=>[s(Pe,{gutter:10,class:"mb8"},{default:f(()=>[s(oe,{span:1.5},{default:f(()=>[B((U(),D(z,{type:"primary",plain:"",icon:"Upload",onClick:se},{default:f(()=>[j("上传文件")]),_:1})),[[J,["system:oss:upload"]]])]),_:1}),s(oe,{span:1.5},{default:f(()=>[B((U(),D(z,{type:"primary",plain:"",icon:"Upload",onClick:K},{default:f(()=>[j("上传图片")]),_:1})),[[J,["system:oss:upload"]]])]),_:1}),s(oe,{span:1.5},{default:f(()=>[B((U(),D(z,{type:"danger",plain:"",icon:"Delete",disabled:i(G),onClick:m[5]||(m[5]=v=>fe())},{default:f(()=>[j(" 删除 ")]),_:1},8,["disabled"])),[[J,["system:oss:remove"]]])]),_:1}),s(oe,{span:1.5},{default:f(()=>[B((U(),D(z,{type:i(L)?"danger":"warning",plain:"",onClick:m[6]||(m[6]=v=>de(!i(L)))},{default:f(()=>[j("预览开关 : "+re(i(L)?"禁用":"启用"),1)]),_:1},8,["type"])),[[J,["system:oss:edit"]]])]),_:1}),s(oe,{span:1.5},{default:f(()=>[B((U(),D(z,{type:"info",plain:"",icon:"Operation",onClick:ae},{default:f(()=>[j("配置管理")]),_:1})),[[J,["system:oss:list"]]])]),_:1}),s(Oe,{showSearch:i(S),"onUpdate:showSearch":m[7]||(m[7]=v=>me(S)?S.value=v:null),onQueryTable:a},null,8,["showSearch"])]),_:1})]),default:f(()=>[i(h)?B((U(),D($e,{key:0,data:i(o),"header-cell-class-name":g,onSelectionChange:I,onHeaderClick:c},{default:f(()=>[s(F,{type:"selection",width:"55",align:"center"}),M("",!0),s(F,{label:"文件名",align:"center",prop:"fileName"}),s(F,{label:"原名",align:"center",prop:"originalName"}),s(F,{label:"文件后缀",align:"center",prop:"fileSuffix"}),s(F,{label:"文件展示",align:"center",prop:"url"},{default:f(v=>[i(L)&&e(v.row.fileSuffix)?(U(),D(St,{key:0,width:100,height:100,src:v.row.url,"preview-src-list":[v.row.url]},null,8,["src","preview-src-list"])):M("",!0),!e(v.row.fileSuffix)||!i(L)?(U(),ee("span",{key:1,textContent:re(v.row.url)},null,8,Ut)):M("",!0)]),_:1}),s(F,{label:"创建时间",align:"center",prop:"createTime",width:"180",sortable:"custom"},{default:f(v=>[Y("span",null,re(d.parseTime(v.row.createTime,"{y}-{m}-{d}")),1)]),_:1}),s(F,{label:"上传人",align:"center",prop:"createByName"}),s(F,{label:"服务商",align:"center",prop:"service",sortable:"custom"}),s(F,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:f(v=>[s(ge,{content:"下载",placement:"top"},{default:f(()=>[B(s(z,{link:"",type:"primary",icon:"Download",onClick:xe=>ne(v.row)},null,8,["onClick"]),[[J,["system:oss:download"]]])]),_:2},1024),s(ge,{content:"删除",placement:"top"},{default:f(()=>[B(s(z,{link:"",type:"primary",icon:"Delete",onClick:xe=>fe(v.row)},null,8,["onClick"]),[[J,["system:oss:remove"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[Le,i(p)]]):M("",!0),B(s(je,{page:i(w).pageNum,"onUpdate:page":m[8]||(m[8]=v=>i(w).pageNum=v),limit:i(w).pageSize,"onUpdate:limit":m[9]||(m[9]=v=>i(w).pageSize=v),total:i(A),onPagination:a},null,8,["page","limit","total"]),[[be,i(A)>0]])]),_:1}),s(ze,{modelValue:i(P).visible,"onUpdate:modelValue":m[12]||(m[12]=v=>i(P).visible=v),title:i(P).title,width:"500px","append-to-body":""},{footer:f(()=>[Y("div",Vt,[s(z,{loading:i(r),type:"primary",onClick:X},{default:f(()=>[j("确 定")]),_:1},8,["loading"]),s(z,{onClick:l},{default:f(()=>[j("取 消")]),_:1})])]),default:f(()=>[s(pe,{ref_key:"ossFormRef",ref:Q,model:i(n),rules:i(t),"label-width":"80px"},{default:f(()=>[s(O,{label:"文件名"},{default:f(()=>[i(C)===0?(U(),D(Te,{key:0,modelValue:i(n).file,"onUpdate:modelValue":m[10]||(m[10]=v=>i(n).file=v)},null,8,["modelValue"])):M("",!0),i(C)===1?(U(),D(Ne,{key:1,modelValue:i(n).file,"onUpdate:modelValue":m[11]||(m[11]=v=>i(n).file=v)},null,8,["modelValue"])):M("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{Kt as default};
