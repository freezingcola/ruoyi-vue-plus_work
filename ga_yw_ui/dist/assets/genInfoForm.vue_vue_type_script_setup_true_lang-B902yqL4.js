import{d as H,r as w,V as L,S as M,i as X,b as $,j as J,o as d,p as b,m as l,k as e,y as u,e as n,q as I,c as g,M as V,w as K,N as v,a7 as Q,x as U,O as Y,P as Z,C as ee,W as le,ax as ae,ac as te,D as ne,au as oe,ao as ue,G as de,aD as me,aE as re,aF as se,X as pe,H as fe}from"./index-BoCONcAc.js";/* empty css                *//* empty css               *//* empty css                 *//* empty css                *//* empty css                    *//* empty css                       *//* empty css               */import"./el-form-item-l0sNRNKZ.js";import{l as _e}from"./index-CbY-aW9v.js";const ie=U("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),ce=U("h4",{class:"form-header"},"其他信息",-1),be=U("h4",{class:"form-header"},"关联信息",-1),Ie=H({__name:"genInfoForm",props:{info:{type:Object,default:null},tables:{type:Array,default:null}},setup(N){const F=w([]),q=w([]),{proxy:k}=L(),T=N,o=M(()=>T.info),S=M(()=>T.tables),P=w({tplCategory:[{required:!0,message:"请选择生成模板",trigger:"blur"}],packageName:[{required:!0,message:"请输入生成包路径",trigger:"blur"}],moduleName:[{required:!0,message:"请输入生成模块名",trigger:"blur"}],businessName:[{required:!0,message:"请输入生成业务名",trigger:"blur"}],functionName:[{required:!0,message:"请输入生成功能名",trigger:"blur"}]}),x=()=>{o.value.subTableFkName=""},D=i=>{i!=="sub"&&(o.value.subTableName="",o.value.subTableFkName="")},B=i=>{S.value.forEach(t=>{const s=t.tableName;if(i===s){F.value=t.columns;return}})},O=async()=>{const i=await _e();i.data.forEach(s=>s.menuId=s.menuId.toString());const t=k==null?void 0:k.handleTree(i.data,"menuId");t&&(q.value=t)};return X(()=>T.info.subTableName,i=>{B(i)}),$(()=>{O()}),(i,t)=>{const s=Y,y=Z,m=ee,r=le,p=J("question-filled"),f=ae,_=te,C=ne,j=oe,h=ue,z=de,R=me,W=re,A=se,E=pe,G=fe;return d(),b(G,{ref:"genInfoForm",model:n(o),rules:n(P),"label-width":"150px"},{default:l(()=>[e(E,null,{default:l(()=>[e(r,{span:12},{default:l(()=>[e(m,{prop:"tplCategory"},{label:l(()=>[u("生成模板")]),default:l(()=>[e(y,{modelValue:n(o).tplCategory,"onUpdate:modelValue":t[0]||(t[0]=a=>n(o).tplCategory=a),onChange:D},{default:l(()=>[e(s,{label:"单表（增删改查）",value:"crud"}),e(s,{label:"树表（增删改查）",value:"tree"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{prop:"packageName"},{label:l(()=>[u(" 生成包路径 "),e(_,{content:"生成在哪个java包下，例如 com.nbcio.system",placement:"top"},{default:l(()=>[e(f,null,{default:l(()=>[e(p)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:n(o).packageName,"onUpdate:modelValue":t[1]||(t[1]=a=>n(o).packageName=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{prop:"moduleName"},{label:l(()=>[u(" 生成模块名 "),e(_,{content:"可理解为子系统名，例如 system",placement:"top"},{default:l(()=>[e(f,null,{default:l(()=>[e(p)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:n(o).moduleName,"onUpdate:modelValue":t[2]||(t[2]=a=>n(o).moduleName=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{prop:"businessName"},{label:l(()=>[u(" 生成业务名 "),e(_,{content:"可理解为功能英文名，例如 user",placement:"top"},{default:l(()=>[e(f,null,{default:l(()=>[e(p)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:n(o).businessName,"onUpdate:modelValue":t[3]||(t[3]=a=>n(o).businessName=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{prop:"functionName"},{label:l(()=>[u(" 生成功能名 "),e(_,{content:"用作类描述，例如 用户",placement:"top"},{default:l(()=>[e(f,null,{default:l(()=>[e(p)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:n(o).functionName,"onUpdate:modelValue":t[4]||(t[4]=a=>n(o).functionName=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[u(" 上级菜单 "),e(_,{content:"分配到指定菜单下，例如 系统管理",placement:"top"},{default:l(()=>[e(f,null,{default:l(()=>[e(p)]),_:1})]),_:1})]),default:l(()=>[e(j,{modelValue:n(o).parentMenuId,"onUpdate:modelValue":t[5]||(t[5]=a=>n(o).parentMenuId=a),data:n(q),props:{value:"menuId",label:"menuName",children:"children"},"value-key":"menuId","node-key":"menuId",placeholder:"选择上级菜单","check-strictly":"",filterable:"",clearable:"","highlight-current":""},null,8,["modelValue","data"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{prop:"genType"},{label:l(()=>[u(" 生成代码方式 "),e(_,{content:"默认为zip压缩包下载，也可以自定义生成路径",placement:"top"},{default:l(()=>[e(f,null,{default:l(()=>[e(p)]),_:1})]),_:1})]),default:l(()=>[e(h,{modelValue:n(o).genType,"onUpdate:modelValue":t[6]||(t[6]=a=>n(o).genType=a),label:"0"},{default:l(()=>[u("zip压缩包")]),_:1},8,["modelValue"]),e(h,{modelValue:n(o).genType,"onUpdate:modelValue":t[7]||(t[7]=a=>n(o).genType=a),label:"1"},{default:l(()=>[u("自定义路径")]),_:1},8,["modelValue"])]),_:1})]),_:1}),n(o).genType=="1"?(d(),b(r,{key:0,span:24},{default:l(()=>[e(m,{prop:"genPath"},{label:l(()=>[u(" 自定义路径 "),e(_,{content:"填写磁盘绝对路径，若不填写，则生成到当前Web项目下",placement:"top"},{default:l(()=>[e(f,null,{default:l(()=>[e(p)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:n(o).genPath,"onUpdate:modelValue":t[9]||(t[9]=a=>n(o).genPath=a)},{append:l(()=>[e(A,null,{dropdown:l(()=>[e(W,null,{default:l(()=>[e(R,{onClick:t[8]||(t[8]=a=>n(o).genPath="/")},{default:l(()=>[u("恢复默认的生成基础路径")]),_:1})]),_:1})]),default:l(()=>[e(z,{type:"primary"},{default:l(()=>[u(" 最近路径快速选择 "),ie]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):I("",!0)]),_:1}),N.info.tplCategory=="tree"?(d(),g(V,{key:0},[ce,K(e(E,null,{default:l(()=>[e(r,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[u(" 树编码字段 "),e(_,{content:"树显示的编码字段名， 如：dept_id",placement:"top"},{default:l(()=>[e(f,null,{default:l(()=>[e(p)]),_:1})]),_:1})]),default:l(()=>[e(y,{modelValue:n(o).treeCode,"onUpdate:modelValue":t[10]||(t[10]=a=>n(o).treeCode=a),placeholder:"请选择"},{default:l(()=>[(d(!0),g(V,null,v(N.info.columns,(a,c)=>(d(),b(s,{key:c,label:a.columnName+"："+a.columnComment,value:a.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[u(" 树父编码字段 "),e(_,{content:"树显示的父编码字段名， 如：parent_Id",placement:"top"},{default:l(()=>[e(f,null,{default:l(()=>[e(p)]),_:1})]),_:1})]),default:l(()=>[e(y,{modelValue:n(o).treeParentCode,"onUpdate:modelValue":t[11]||(t[11]=a=>n(o).treeParentCode=a),placeholder:"请选择"},{default:l(()=>[(d(!0),g(V,null,v(n(o).columns,(a,c)=>(d(),b(s,{key:c,label:a.columnName+"："+a.columnComment,value:a.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[u(" 树名称字段 "),e(_,{content:"树节点的显示名称字段名， 如：dept_name",placement:"top"},{default:l(()=>[e(f,null,{default:l(()=>[e(p)]),_:1})]),_:1})]),default:l(()=>[e(y,{modelValue:n(o).treeName,"onUpdate:modelValue":t[12]||(t[12]=a=>n(o).treeName=a),placeholder:"请选择"},{default:l(()=>[(d(!0),g(V,null,v(N.info.columns,(a,c)=>(d(),b(s,{key:c,label:a.columnName+"："+a.columnComment,value:a.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},512),[[Q,N.info.tplCategory=="tree"]])],64)):I("",!0),N.info.tplCategory=="sub"?(d(),g(V,{key:1},[be,e(E,null,{default:l(()=>[e(r,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[u(" 关联子表的表名 "),e(_,{content:"关联子表的表名， 如：sys_user",placement:"top"},{default:l(()=>[e(f,null,{default:l(()=>[e(p)]),_:1})]),_:1})]),default:l(()=>[e(y,{modelValue:n(o).subTableName,"onUpdate:modelValue":t[13]||(t[13]=a=>n(o).subTableName=a),placeholder:"请选择",onChange:x},{default:l(()=>[(d(!0),g(V,null,v(n(S),(a,c)=>(d(),b(s,{key:c,label:a.tableName+"："+a.tableComment,value:a.tableName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[u(" 子表关联的外键名 "),e(_,{content:"子表关联的外键名， 如：user_id",placement:"top"},{default:l(()=>[e(f,null,{default:l(()=>[e(p)]),_:1})]),_:1})]),default:l(()=>[e(y,{modelValue:n(o).subTableFkName,"onUpdate:modelValue":t[14]||(t[14]=a=>n(o).subTableFkName=a),placeholder:"请选择"},{default:l(()=>[(d(!0),g(V,null,v(n(F),(a,c)=>(d(),b(s,{key:c,label:a.columnName+"："+a.columnComment,value:a.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})],64)):I("",!0)]),_:1},8,["model","rules"])}}});export{Ie as _};
