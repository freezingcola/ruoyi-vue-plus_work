import{d as I,V as A,aa as G,r as p,Y as H,o as N,p as V,m as t,k as e,e as a,a3 as X,x as C,y as c,t as S,T as Y,q as J,D as M,C as O,G as W,H as Z,a8 as ee,a9 as oe,X as te,am as le}from"./index-BoCONcAc.js";/* empty css               */import{_ as ae}from"./index-B1KNwlHH.js";/* empty css                 *//* empty css                    */import{_ as ne}from"./index-BXJ8XT-L.js";/* empty css                        *//* empty css                */import"./el-form-item-l0sNRNKZ.js";import{u as se,d as re}from"./index-hgsK1_Ho.js";const ue={class:"dialog-footer"},ie=I({name:"SelectUser"}),ye=I({...ie,props:{roleId:{type:[Number,String],required:!0}},emits:["ok"],setup(R,{expose:E,emit:U}){const T=R,{proxy:r}=A(),{sys_normal_disable:q}=G(r==null?void 0:r.useDict("sys_normal_disable")),b=p([]),i=p(!1),_=p(0),v=p([]),n=H({pageNum:1,pageSize:10,roleId:void 0,userName:void 0,phonenumber:void 0}),w=p(),y=p(),F=()=>{n.roleId=T.roleId,m(),i.value=!0},B=s=>{var o;(o=w.value)==null||o.toggleRowSelection(s,!1)},D=s=>{v.value=s.map(o=>o.userId)},m=async()=>{const s=await se(n);b.value=s.rows,_.value=s.total},f=()=>{n.pageNum=1,m()},z=()=>{var s;(s=y.value)==null||s.resetFields(),m()},K=U,L=async()=>{const s=n.roleId,o=v.value.join(",");if(o==""){r==null||r.$modal.msgError("请选择要分配的用户");return}await re({roleId:s,userIds:o}),r==null||r.$modal.msgSuccess("分配成功"),K("ok"),i.value=!1};return E({show:F}),(s,o)=>{const h=M,g=O,d=W,$=Z,u=ee,x=ne,P=oe,Q=ae,k=te,j=le;return N(),V(k,null,{default:t(()=>[e(j,{modelValue:a(i),"onUpdate:modelValue":o[5]||(o[5]=l=>X(i)?i.value=l:null),title:"选择用户",width:"800px",top:"5vh","append-to-body":""},{footer:t(()=>[C("div",ue,[e(d,{type:"primary",onClick:L},{default:t(()=>[c("确 定")]),_:1}),e(d,{onClick:o[4]||(o[4]=l=>i.value=!1)},{default:t(()=>[c("取 消")]),_:1})])]),default:t(()=>[e($,{ref_key:"queryFormRef",ref:y,model:a(n),inline:!0},{default:t(()=>[e(g,{label:"用户名称",prop:"userName"},{default:t(()=>[e(h,{modelValue:a(n).userName,"onUpdate:modelValue":o[0]||(o[0]=l=>a(n).userName=l),placeholder:"请输入用户名称",clearable:"",onKeyup:S(f,["enter"])},null,8,["modelValue"])]),_:1}),e(g,{label:"手机号码",prop:"phonenumber"},{default:t(()=>[e(h,{modelValue:a(n).phonenumber,"onUpdate:modelValue":o[1]||(o[1]=l=>a(n).phonenumber=l),placeholder:"请输入手机号码",clearable:"",onKeyup:S(f,["enter"])},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(d,{type:"primary",icon:"Search",onClick:f},{default:t(()=>[c("搜索")]),_:1}),e(d,{icon:"Refresh",onClick:z},{default:t(()=>[c("重置")]),_:1})]),_:1})]),_:1},8,["model"]),e(k,null,{default:t(()=>[e(P,{ref_key:"tableRef",ref:w,data:a(b),height:"260px",onRowClick:B,onSelectionChange:D},{default:t(()=>[e(u,{type:"selection",width:"55"}),e(u,{label:"用户名称",prop:"userName","show-overflow-tooltip":!0}),e(u,{label:"用户昵称",prop:"nickName","show-overflow-tooltip":!0}),e(u,{label:"邮箱",prop:"email","show-overflow-tooltip":!0}),e(u,{label:"手机",prop:"phonenumber","show-overflow-tooltip":!0}),e(u,{label:"状态",align:"center",prop:"status"},{default:t(l=>[e(x,{options:a(q),value:l.row.status},null,8,["options","value"])]),_:1}),e(u,{label:"创建时间",align:"center",prop:"createTime",width:"180"},{default:t(l=>[C("span",null,Y(s.parseTime(l.row.createTime)),1)]),_:1})]),_:1},8,["data"]),a(_)>0?(N(),V(Q,{key:0,page:a(n).pageNum,"onUpdate:page":o[2]||(o[2]=l=>a(n).pageNum=l),limit:a(n).pageSize,"onUpdate:limit":o[3]||(o[3]=l=>a(n).pageSize=l),total:a(_),onPagination:m},null,8,["page","limit","total"])):J("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{ye as _};
