import{d as h,V as $,Y as b,r,aa as G,o as f,c as j,k as l,m as o,y as u,q as g,e as i,p as O,x as C,E as S,ao as T,a2 as z,C as H,H as M,G as Y,am as J}from"./index-BoCONcAc.js";/* empty css                */import{_ as K}from"./index-DG7XexN9.js";import{_ as Q}from"./index.vue_vue_type_style_index_0_lang-Dyb-nOKR.js";import"./el-form-item-l0sNRNKZ.js";/* empty css                       *//* empty css                 */import{u as X}from"./index-hmiVVuGg.js";import{j as Z,k as ee,r as te}from"./index-DABdJVQF.js";import ae from"./process1-CwB6Ars8.js";const oe={class:"p-2"},le={key:0,class:"dialog-footer"},se={class:"dialog-footer"},ie=h({name:"InfoLog"}),ge=h({...ie,props:{dataObject:{type:[Object],required:!0}},emits:["ok","freshList"],setup(E,{expose:q,emit:x}){const{proxy:c}=$(),F=x,W=b({someProperty:""}),m=r(!1);r([]);const n=r(!1);r(!0),r(!0),r([]),r(0);const p=r(),t=E;b({visible:!1,title:""});const k={id:void 0,workContent:void 0,state:void 0,attachs:void 0},I=b({form:{...k},queryParams:{pageNum:1,pageSize:10,workContent:void 0,state:void 0,attachs:void 0,params:{}},rules:{workContent:[{required:!0,message:"内容不能为空",trigger:"blur"}],state:[{required:!1,message:"标题不能为空",trigger:"blur"}],attachs:[{required:!1,message:"标题不能为空",trigger:"blur"}]}}),{queryParams:re,form:e,rules:L}=G(I),P=()=>{debugger;y(),t.dataObject.type==="receiveWork"&&(e.value.workContent="已接收，正在处理"),t.dataObject.visible=!0},B=()=>{y(),t.dataObject.visible=!1},y=()=>{var d;e.value={...k},(d=p.value)==null||d.resetFields()},D=()=>{var d;(d=p.value)==null||d.validate(async a=>{e.value.workContent==null||e.value.workContent=="<p><br></p>"?S({message:"请输入内容",type:"warning"}):a&&(n.value=!0,e.value.workInfoId=t.dataObject.row.id,console.info(e),e.value.id?await X(e.value).finally(()=>n.value=!1):t.dataObject.type==="finishAudit"?await Z(e.value).finally(()=>n.value=!1):t.dataObject.type==="finishWork"?await ee(e.value).finally(()=>n.value=!1):t.dataObject.type==="receiveWork"&&(await te(e.value).finally(()=>n.value=!1),t.dataObject.type=""),c==null||c.$modal.msgSuccess("操作成功"),t.dataObject.visible=!1,F("ok"))})};return q({show:P}),(d,a)=>{const w=T,N=z,v=H,R=Q,U=K,A=M,_=Y,V=J;return f(),j("div",oe,[l(V,{title:t.dataObject.title,modelValue:t.dataObject.visible,"onUpdate:modelValue":a[3]||(a[3]=s=>t.dataObject.visible=s),width:"850px","append-to-body":""},{footer:o(()=>[t.dataObject.type==="finishAudit"||t.dataObject.type==="receiveWork"||t.dataObject.type==="finishWork"?(f(),j("div",le,[l(_,{loading:n.value,type:"primary",onClick:D},{default:o(()=>[u("确 定")]),_:1},8,["loading"]),l(_,{onClick:B},{default:o(()=>[u("取 消")]),_:1})])):g("",!0)]),default:o(()=>[l(A,{ref_key:"infoLogFormRef",ref:p,model:i(e),rules:i(L),"label-width":"80px"},{default:o(()=>[t.dataObject.type==="finishAudit"?(f(),O(v,{key:0,label:"审核结果",prop:"menuType"},{default:o(()=>[l(N,{modelValue:i(e).state,"onUpdate:modelValue":a[0]||(a[0]=s=>i(e).state=s)},{default:o(()=>[l(w,{value:"1"},{default:o(()=>[u("通过")]),_:1}),l(w,{value:"0"},{default:o(()=>[u("不通过")]),_:1})]),_:1},8,["modelValue"])]),_:1})):g("",!0),l(v,{label:"内容",prop:"workContent"},{default:o(()=>[l(R,{modelValue:i(e).workContent,"onUpdate:modelValue":a[1]||(a[1]=s=>i(e).workContent=s),"min-height":190},null,8,["modelValue"])]),_:1}),l(v,{label:"附件",prop:"attachs"},{default:o(()=>[l(U,{modelValue:i(e).attachs,"onUpdate:modelValue":a[2]||(a[2]=s=>i(e).attachs=s)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),l(V,{modelValue:m.value,"onUpdate:modelValue":a[5]||(a[5]=s=>m.value=s),title:"流程跟踪",width:"80%"},{footer:o(()=>[C("div",se,[l(_,{type:"primary",onClick:a[4]||(a[4]=s=>m.value=!1)},{default:o(()=>[u(" 关闭 ")]),_:1})])]),default:o(()=>[C("div",null,[m.value?(f(),O(ae,{key:0,processData:i(W)},null,8,["processData"])):g("",!0)])]),_:1},8,["modelValue"])])}}});export{ge as _};
