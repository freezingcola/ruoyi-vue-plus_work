import{an as E,d as g,r as f,V as O,b as z,j as b,o as t,c as a,k as i,m as n,x as e,e as l,T as o,q as c,y as V,a0 as B,W as F,X as I}from"./index-BoCONcAc.js";/* empty css               *//* empty css               *//* empty css                */import{i as y}from"./index-CFduwF1Z.js";function N(){return E({url:"/monitor/cache",method:"get"})}const S={class:"p-2"},D=e("span",{style:{"vertical-align":"middle"}},"基本信息",-1),L={class:"el-table el-table--enable-row-hover el-table--medium"},M={style:{width:"100%"}},P=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"Redis版本")],-1),R={class:"el-table__cell is-leaf"},T={key:0,class:"cell"},$=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"运行模式")],-1),j={class:"el-table__cell is-leaf"},q={key:0,class:"cell"},A=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"端口")],-1),K={class:"el-table__cell is-leaf"},U={key:0,class:"cell"},W=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"客户端数")],-1),X={class:"el-table__cell is-leaf"},G={key:0,class:"cell"},H=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"运行时间(天)")],-1),J={class:"el-table__cell is-leaf"},Q={key:0,class:"cell"},Y=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"使用内存")],-1),Z={class:"el-table__cell is-leaf"},ee={key:0,class:"cell"},se=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"使用CPU")],-1),le={class:"el-table__cell is-leaf"},te={key:0,class:"cell"},ae=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"内存配置")],-1),oe={class:"el-table__cell is-leaf"},ce={key:0,class:"cell"},ie=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"AOF是否开启")],-1),ne={class:"el-table__cell is-leaf"},_e={key:0,class:"cell"},de=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"RDB是否成功")],-1),re={class:"el-table__cell is-leaf"},me={key:0,class:"cell"},he=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"Key数量")],-1),ue={class:"el-table__cell is-leaf"},fe={key:0,class:"cell"},be=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"网络入口/出口")],-1),ve={class:"el-table__cell is-leaf"},pe={key:0,class:"cell"},ye=e("span",{style:{"vertical-align":"middle"}},"命令统计",-1),ge={class:"el-table el-table--enable-row-hover el-table--medium"},ke=e("span",{style:{"vertical-align":"middle"}},"内存信息",-1),we={class:"el-table el-table--enable-row-hover el-table--medium"},Ce=g({name:"Cache"}),Fe=g({...Ce,setup(xe){const s=f({}),v=f(),p=f(),{proxy:_}=O(),k=async()=>{_==null||_.$modal.loading("正在加载缓存监控数据，请稍候！");const r=await N();_==null||_.$modal.closeLoading(),s.value=r.data;const m=y(v.value,"macarons");m.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"命令",type:"pie",roseType:"radius",radius:[15,95],center:["50%","38%"],data:r.data.commandStats,animationEasing:"cubicInOut",animationDuration:1e3}]});const d=y(p.value,"macarons");d.setOption({tooltip:{formatter:"{b} <br/>{a} : "+s.value.info.used_memory_human},series:[{name:"峰值",type:"gauge",min:0,max:1e3,detail:{formatter:s.value.info.used_memory_human},data:[{value:parseFloat(s.value.info.used_memory_human),name:"内存消耗"}]}]}),window.addEventListener("resize",()=>{m.resize(),d.resize()})};return z(()=>{k()}),(r,m)=>{const d=b("Monitor"),h=B,u=F,w=b("PieChart"),C=b("Odometer"),x=I;return t(),a("div",S,[i(x,null,{default:n(()=>[i(u,{span:24,class:"card-box"},{default:n(()=>[i(h,{shadow:"hover"},{header:n(()=>[i(d,{style:{width:"1em",height:"1em","vertical-align":"middle"}}),D]),default:n(()=>[e("div",L,[e("table",M,[e("tbody",null,[e("tr",null,[P,e("td",R,[l(s).info?(t(),a("div",T,o(l(s).info.redis_version),1)):c("",!0)]),$,e("td",j,[l(s).info?(t(),a("div",q,o(l(s).info.redis_mode==="standalone"?"单机":"集群"),1)):c("",!0)]),A,e("td",K,[l(s).info?(t(),a("div",U,o(l(s).info.tcp_port),1)):c("",!0)]),W,e("td",X,[l(s).info?(t(),a("div",G,o(l(s).info.connected_clients),1)):c("",!0)])]),e("tr",null,[H,e("td",J,[l(s).info?(t(),a("div",Q,o(l(s).info.uptime_in_days),1)):c("",!0)]),Y,e("td",Z,[l(s).info?(t(),a("div",ee,o(l(s).info.used_memory_human),1)):c("",!0)]),se,e("td",le,[l(s).info?(t(),a("div",te,o(parseFloat(l(s).info.used_cpu_user_children).toFixed(2)),1)):c("",!0)]),ae,e("td",oe,[l(s).info?(t(),a("div",ce,o(l(s).info.maxmemory_human),1)):c("",!0)])]),e("tr",null,[ie,e("td",ne,[l(s).info?(t(),a("div",_e,o(l(s).info.aof_enabled==="0"?"否":"是"),1)):c("",!0)]),de,e("td",re,[l(s).info?(t(),a("div",me,o(l(s).info.rdb_last_bgsave_status),1)):c("",!0)]),he,e("td",ue,[l(s).dbSize?(t(),a("div",fe,o(l(s).dbSize),1)):c("",!0)]),be,e("td",ve,[l(s).info?(t(),a("div",pe,o(l(s).info.instantaneous_input_kbps)+"kps/"+o(l(s).info.instantaneous_output_kbps)+"kps ",1)):c("",!0)])])])])])]),_:1})]),_:1}),i(u,{span:12,class:"card-box"},{default:n(()=>[i(h,{shadow:"hover"},{header:n(()=>[i(w,{style:{width:"1em",height:"1em","vertical-align":"middle"}}),ye]),default:n(()=>[e("div",ge,[e("div",{ref_key:"commandstats",ref:v,style:{height:"420px"}},null,512)])]),_:1})]),_:1}),i(u,{span:12,class:"card-box"},{default:n(()=>[i(h,{shadow:"hover"},{header:n(()=>[i(C,{style:{width:"1em",height:"1em","vertical-align":"middle"}}),V(),ke]),default:n(()=>[e("div",we,[e("div",{ref_key:"usedmemory",ref:p,style:{height:"420px"}},null,512)])]),_:1})]),_:1})]),_:1})])}}});export{Fe as default};
