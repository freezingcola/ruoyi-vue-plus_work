import{h as F,L as j,o as d,c as C,k as n,m as o,x as t,y as u,T as l,p as g,q as w,M as E,aw as b,aY as D,aZ as A,ar as x,aS as P,G as T,am as k,I as N,J as S}from"./index-BoCONcAc.js";import{_ as V}from"./index-Xwb6tvPf.js";/* empty css                        *//* empty css                */import{m as I}from"./index-DABdJVQF.js";const J={name:"FaultReport",data(){return{isFile:!1,Attachs:[],cjAttachs:[],shAttachs:[],shwbAttachs:[],userName:F().nickname,allocation:"",Doing:"",ratify:"",listData:[],wbratify:"",stage:1,cjPerson:"",cjTime:"",cjContent:"",clPerson:"",clTime:"",clContent:"",shPerson:"",shTime:"",shContent:"",wbPerson:"",wbTime:"",wbContent:"",wcPerson:"",wcTime:"",wcContent:"",cjUrl:"",cjUrlList:[],shUrl:"",shUrlList:[],clUrl:"",clUrlList:[],wbUrl:"",wbUrlList:[],shStatus:"",jsName:""}},props:{processData:Object},mounted(){console.log(this.processData,333),this.getList()},methods:{openFileList(a){this.isFile=!0,this.Attachs=[];debugger;a=="cj"?this.Attachs=this.cjAttachs:a=="sh"?this.Attachs=this.shAttachs:a=="shwb"&&(this.Attachs=this.shwbAttachs)},async getList(){let a=this.processData.someProperty,r=await I(a);r.data&&(this.listData=r.data,this.listData.forEach(i=>{let f=i.state,s=i.createTime,p=i.workContent.replace(/<[^>]*>?/gm,""),h=i.createBy;if(f==2){if(this.cjPerson=h,this.cjTime=s,this.cjContent=p,this.stage=1,this.allocation='分配给"'+i.allocationBy+'"',this.jsName=i.allocationBy,i.urlList){let _=JSON.parse(i.urlList),e=[];for(var c of _)e.push(c.url);this.cjUrl=e[0],this.cjUrlList=e,console.log(this.cjUrlList)}this.cjAttachs=i.attachs,console.log(i.attachs)}else if(f==3){if(this.cjContent='"'+this.jsName+'"已接收...',this.clPerson=h,this.clTime=s,this.clContent=p,this.stage=2,this.Doing='"'+h+'"正在处理中...',i.urlList){let _=JSON.parse(i.urlList),e=[];for(var c of _)e.push(c.url);this.clUrl=e[0],this.clUrlList=e}}else if(f==4){if(this.clContent='"'+this.jsName+'"已处理...',this.Doing='"'+this.jsName+'"已处理...',this.shPerson=h,this.shTime=s,this.shContent=p,this.stage=3,this.ratify="已完成，等待审核...",i.urlList){let _=JSON.parse(i.urlList),e=[];for(var c of _)e.push(c.url);this.shUrl=e[0],this.shUrlList=e}this.shAttachs=i.attachs}else if(f==0)this.wbPerson=h,this.wbTime=s,this.wbContent=p,this.stage=4,this.wbratify="不通过!已退回重新处理中...",this.shStatus="1";else if(f==1){if(this.wcPerson=h,this.wbPerson=h,this.wbPerson=h,this.wbTime=s,this.wcTime=s,this.wcContent=p,this.wbContent="审核通过！已完成！",this.wbratify="审核通过!",this.ratify="已审核!",this.stage=5,i.urlList){let _=JSON.parse(i.urlList),e=[];for(var c of _)e.push(c.url);this.wbUrl=e[0],this.wbUrlList=e}this.shwbAttachs=i.attachs}else this.wcPerson="无",this.wcTime="无",this.wcContent="无"}))},async goToDetailPage(a){alert("1231"),this.$router.push({name:"FileDownload",params:{fileUrl:a}})}}},m=a=>(N("data-v-9fe42ee6"),a=a(),S(),a),O=m(()=>t("div",{style:{height:"0px"}},null,-1)),z={style:{height:"1000px","margin-left":"15%","margin-top":"2%"}},q={style:{"margin-left":"30%","margin-top":"-1050px",position:"relative"}},G={class:"fault-report"},M=m(()=>t("h2",null,[u("创建"),t("span")],-1)),R={class:"report-detail"},W={style:{"margin-left":"15%"}},Y={class:"report-detail line-clamp"},Z={class:"demo-image__preview",style:{"text-align":"end","margin-top":"-22%"}},H=m(()=>t("div",{class:"image-slot"}," 文件不是图片类型 ",-1)),K={class:"fault-report"},Q=m(()=>t("h2",null,"处理中",-1)),X={class:"report-detail"},$={style:{"margin-left":"15%"}},tt={class:"report-detail line-clamp"},st={class:"fault-report"},et=m(()=>t("h2",null,"审核中",-1)),it={class:"report-detail"},lt={style:{"margin-left":"15%"}},ot={class:"report-detail line-clamp"},nt={class:"demo-image__preview",style:{"text-align":"end","margin-top":"-22%"}},rt=m(()=>t("div",{class:"image-slot"}," 文件不是图片类型 ",-1)),ct={class:"fault-report"},at=m(()=>t("h2",null,"审核完毕",-1)),ht={class:"report-detail"},ut={style:{"margin-left":"15%"}},pt={class:"report-detail line-clamp"},_t={class:"demo-image__preview",style:{"text-align":"end","margin-top":"-22%"}},mt=m(()=>t("div",{class:"image-slot"}," 文件不是图片类型 ",-1)),dt={class:"fault-report"},gt=m(()=>t("h2",null,"完成",-1)),wt={class:"report-detail"},ft={style:{"margin-left":"15%"}},vt={class:"report-detail line-clamp"},Bt={class:"dialog-footer"};function yt(a,r,i,f,s,p){const h=b,c=D,_=A,e=x,y=P,B=T,L=V,U=k;return d(),C(E,null,[n(h,{style:{position:"static"},content:[s.userName]},{default:o(()=>[O]),_:1},8,["content"]),t("div",z,[n(_,{direction:"vertical",active:this.stage},{default:o(()=>[n(c,{title:"创建",description:this.allocation},null,8,["description"]),n(c,{title:"处理中",description:this.Doing},null,8,["description"]),n(c,{title:"审核中",description:this.ratify},null,8,["description"]),n(c,{title:"审核完毕",description:this.wbratify},null,8,["description"]),n(c,{title:"完成"})]),_:1},8,["active"]),t("div",q,[t("div",G,[M,t("p",R,[u("发起人: "),t("span",null,l(this.cjPerson),1),t("span",W,"时间 :"+l(this.cjTime),1)]),n(e,{placement:"top-start",width:600,trigger:"hover",content:this.cjContent},{reference:o(()=>[t("p",Y,"内容: "+l(this.cjContent),1)]),_:1},8,["content"]),t("div",Z,[s.cjUrlList&&s.cjUrlList.length>0?(d(),g(y,{key:0,style:{width:"100px",height:"100px"},src:s.cjUrl,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":s.cjUrlList,"initial-index":4,fit:"cover"},{error:o(()=>[H]),_:1},8,["src","preview-src-list"])):w("",!0),t("p",null,[s.cjUrlList&&s.cjUrlList.length>0?(d(),g(B,{key:0,style:{color:"#1c84c6"},onClick:r[0]||(r[0]=v=>p.openFileList("cj"))},{default:o(()=>[u(" 查看附件 ("+l(s.cjUrlList.length)+") ",1)]),_:1})):w("",!0)])])]),t("div",K,[Q,t("p",X,[u("发起人: "),t("span",null,l(this.clPerson),1),t("span",$,"时间 :"+l(this.clTime),1)]),n(e,{placement:"top-start",width:600,trigger:"hover",content:this.clContent},{reference:o(()=>[t("p",tt,"内容: "+l(this.clContent),1)]),_:1},8,["content"])]),t("div",st,[et,t("p",it,[u("发起人: "),t("span",null,l(this.shPerson),1),t("span",lt,"时间 :"+l(this.shTime),1)]),n(e,{placement:"top-start",width:600,trigger:"hover",content:this.shContent},{reference:o(()=>[t("p",ot,"内容: "+l(this.shContent),1)]),_:1},8,["content"]),t("div",nt,[s.shUrlList&&s.shUrlList.length>0?(d(),g(y,{key:0,style:{width:"100px",height:"100px"},src:s.shUrl,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":s.shUrlList,"initial-index":4,fit:"cover"},{error:o(()=>[rt]),_:1},8,["src","preview-src-list"])):w("",!0),t("p",null,[s.shUrlList&&s.shUrlList.length>0?(d(),g(B,{key:0,style:{color:"#1c84c6"},onClick:r[1]||(r[1]=v=>p.openFileList("sh"))},{default:o(()=>[u(" 查看附件 ("+l(s.shUrlList.length)+") ",1)]),_:1})):w("",!0)])])]),t("div",ct,[at,t("p",ht,[u("审核人: "),t("span",null,l(this.wbPerson),1),t("span",ut,"时间 :"+l(this.wbTime),1)]),n(e,{placement:"top-start",width:600,trigger:"hover",content:this.wbContent},{reference:o(()=>[t("p",pt,"内容: "+l(this.wbContent),1)]),_:1},8,["content"]),t("div",_t,[s.wbUrlList&&s.wbUrlList.length>0?(d(),g(y,{key:0,style:{width:"100px",height:"100px"},src:s.wbUrl,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":s.wbUrlList,"initial-index":4,fit:"cover"},{error:o(()=>[mt]),_:1},8,["src","preview-src-list"])):w("",!0),t("p",null,[s.wbUrlList&&s.wbUrlList.length>0?(d(),g(B,{key:0,style:{color:"#1c84c6"},onClick:r[2]||(r[2]=v=>p.openFileList("shwb"))},{default:o(()=>[u(" 查看附件 ("+l(s.wbUrlList.length)+") ",1)]),_:1})):w("",!0)])])]),t("div",dt,[gt,t("p",wt,[u("创建人: "),t("span",null,l(this.wcPerson),1),t("span",ft,"时间 :"+l(this.wcTime),1)]),n(e,{placement:"top-start",width:600,trigger:"hover",content:this.wcContent},{reference:o(()=>[t("p",vt,"内容: "+l(this.wcContent),1)]),_:1},8,["content"])])]),n(U,{modelValue:s.isFile,"onUpdate:modelValue":r[4]||(r[4]=v=>s.isFile=v),title:"附件",width:"50%"},{footer:o(()=>[t("div",Bt,[n(B,{onClick:r[3]||(r[3]=v=>s.isFile=!1)},{default:o(()=>[u("关闭")]),_:1})])]),default:o(()=>[s.isFile?(d(),g(L,{key:0,modelValue:s.Attachs},null,8,["modelValue"])):w("",!0)]),_:1},8,["modelValue"])])],64)}const Et=j(J,[["render",yt],["__scopeId","data-v-9fe42ee6"]]);export{Et as default};
