import{d as ae,V as Ee,aa as X,r as u,Y,aK as Ue,b as Te,$ as De,o as c,c as F,k as e,m as o,e as l,a3 as J,ab as Pe,w as v,x as q,t as $,M as Z,N as ee,p as b,y as g,a7 as te,q as xe,T as le,D as Re,aC as Fe,a0 as qe,W as $e,C as Be,au as Ke,O as Oe,P as Le,G as ze,H as Ae,X as Qe,a8 as Ge,ac as Me,a9 as je,al as He,ao as We,a2 as Xe,am as Ye,v as Je}from"./index-BoCONcAc.js";/* empty css                       *//* empty css                 *//* empty css                        */import{_ as Ze}from"./index-B1KNwlHH.js";/* empty css                 *//* empty css                    */import{_ as et}from"./index-BXJ8XT-L.js";/* empty css                        *//* empty css               */import{_ as tt}from"./index-B4NenLWv.js";/* empty css                *//* empty css                *//* empty css                       */import"./el-form-item-l0sNRNKZ.js";/* empty css               *//* empty css                */import{l as lt,g as at,u as ot,a as st,d as nt}from"./index-CQRcnqDf.js";import{e as dt}from"./index-JZ_QvNlG.js";const rt={class:"p-2"},pt={class:"mb-[10px]"},ut={class:"dialog-footer"},it=ae({name:"Post"}),Pt=ae({...it,setup(mt){const{proxy:r}=Ee(),{sys_normal_disable:S}=X(r==null?void 0:r.useDict("sys_normal_disable")),B=u([]),E=u(!0),h=u(!0),U=u([]),K=u(!0),O=u(!0),T=u(0),w=u(""),I=u([]),D=u(),P=u(),L=u(),_=Y({visible:!1,title:""}),z={postId:void 0,deptId:void 0,postCode:"",postName:"",postCategory:"",postSort:0,status:"0",remark:""},oe=Y({form:{...z},queryParams:{pageNum:1,pageSize:10,postCode:"",postName:"",postCategory:"",status:""},rules:{postName:[{required:!0,message:"岗位名称不能为空",trigger:"blur"}],postCode:[{required:!0,message:"岗位编码不能为空",trigger:"blur"}],deptId:[{required:!0,message:"部门不能为空",trigger:"blur"}],postSort:[{required:!0,message:"岗位顺序不能为空",trigger:"blur"}]}}),{queryParams:n,form:d,rules:se}=X(oe),ne=(s,t)=>s?t.label.indexOf(s)!==-1:!0;Ue(()=>{var s;(s=D.value)==null||s.filter(w.value)},{flush:"post"});const de=async()=>{const s=await dt.deptTreeSelect();I.value=s.data},re=s=>{n.value.belongDeptId=s.id,n.value.deptId=void 0,V()},y=async()=>{E.value=!0;const s=await lt(n.value);B.value=s.rows,T.value=s.total,E.value=!1},pe=()=>{x(),_.visible=!1},x=()=>{var s;d.value={...z},(s=P.value)==null||s.resetFields()},V=()=>{n.value.pageNum=1,n.value.deptId&&(n.value.belongDeptId=void 0),y()},ue=()=>{var s,t;(s=L.value)==null||s.resetFields(),n.value.pageNum=1,n.value.deptId=void 0,(t=D.value)==null||t.setCurrentKey(void 0),n.value.belongDeptId=void 0,V()},ie=s=>{U.value=s.map(t=>t.postId),K.value=s.length!=1,O.value=!s.length},me=()=>{x(),_.visible=!0,_.title="添加岗位"},A=async s=>{x();const t=(s==null?void 0:s.postId)||U.value[0],i=await at(t);Object.assign(d.value,i.data),_.visible=!0,_.title="修改岗位"},ce=()=>{var s;(s=P.value)==null||s.validate(async t=>{t&&(d.value.postId?await ot(d.value):await st(d.value),r==null||r.$modal.msgSuccess("操作成功"),_.visible=!1,await y())})},Q=async s=>{const t=(s==null?void 0:s.postId)||U.value;await(r==null?void 0:r.$modal.confirm('是否确认删除岗位编号为"'+t+'"的数据项？')),await nt(t),await y(),r==null||r.$modal.msgSuccess("删除成功")},_e=()=>{r==null||r.download("system/post/export",{...n.value},`post_${new Date().getTime()}.xlsx`)};return Te(()=>{de(),y()}),(s,t)=>{const i=Re,fe=Fe,R=qe,C=$e,p=Be,G=Ke,ve=Oe,ge=Le,m=ze,M=Ae,be=tt,j=Qe,f=Ge,ye=et,H=Me,Ve=je,Ce=Ze,ke=He,he=We,we=Xe,Ie=Ye,k=De("hasPermi"),Ne=Je;return c(),F("div",rt,[e(j,{gutter:20},{default:o(()=>[e(C,{lg:4,xs:24,style:{}},{default:o(()=>[e(R,{shadow:"hover"},{default:o(()=>[e(i,{modelValue:l(w),"onUpdate:modelValue":t[0]||(t[0]=N=>J(w)?w.value=N:null),placeholder:"请输入部门名称","prefix-icon":"Search",clearable:""},null,8,["modelValue"]),e(fe,{ref_key:"deptTreeRef",ref:D,class:"mt-2","node-key":"id",data:l(I),props:{label:"label",children:"children"},"expand-on-click-node":!1,"filter-node-method":ne,"highlight-current":"","default-expand-all":"",onNodeClick:re},null,8,["data"])]),_:1})]),_:1}),e(C,{lg:20,xs:24},{default:o(()=>{var N,W;return[e(Pe,{"enter-active-class":(N=l(r))==null?void 0:N.animate.searchAnimate.enter,"leave-active-class":(W=l(r))==null?void 0:W.animate.searchAnimate.leave},{default:o(()=>[v(q("div",pt,[e(R,{shadow:"hover"},{default:o(()=>[e(M,{ref_key:"queryFormRef",ref:L,model:l(n),inline:!0},{default:o(()=>[e(p,{label:"岗位编码",prop:"postCode"},{default:o(()=>[e(i,{modelValue:l(n).postCode,"onUpdate:modelValue":t[1]||(t[1]=a=>l(n).postCode=a),placeholder:"请输入岗位编码",clearable:"",onKeyup:$(V,["enter"])},null,8,["modelValue"])]),_:1}),e(p,{label:"类别编码",prop:"postCategory"},{default:o(()=>[e(i,{modelValue:l(n).postCategory,"onUpdate:modelValue":t[2]||(t[2]=a=>l(n).postCategory=a),placeholder:"请输入类别编码",clearable:"",style:{width:"200px"},onKeyup:$(V,["enter"])},null,8,["modelValue"])]),_:1}),e(p,{label:"岗位名称",prop:"postName"},{default:o(()=>[e(i,{modelValue:l(n).postName,"onUpdate:modelValue":t[3]||(t[3]=a=>l(n).postName=a),placeholder:"请输入岗位名称",clearable:"",onKeyup:$(V,["enter"])},null,8,["modelValue"])]),_:1}),e(p,{label:"部门",prop:"deptId"},{default:o(()=>[e(G,{modelValue:l(n).deptId,"onUpdate:modelValue":t[4]||(t[4]=a=>l(n).deptId=a),data:l(I),props:{value:"id",label:"label",children:"children"},"value-key":"id",placeholder:"请选择部门","check-strictly":""},null,8,["modelValue","data"])]),_:1}),e(p,{label:"状态",prop:"status"},{default:o(()=>[e(ge,{modelValue:l(n).status,"onUpdate:modelValue":t[5]||(t[5]=a=>l(n).status=a),placeholder:"岗位状态",clearable:""},{default:o(()=>[(c(!0),F(Z,null,ee(l(S),a=>(c(),b(ve,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,null,{default:o(()=>[e(m,{type:"primary",icon:"Search",onClick:V},{default:o(()=>[g("搜索")]),_:1}),e(m,{icon:"Refresh",onClick:ue},{default:o(()=>[g("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})],512),[[te,l(h)]])]),_:1},8,["enter-active-class","leave-active-class"]),e(R,{shadow:"hover"},{header:o(()=>[e(j,{gutter:10,class:"mb8"},{default:o(()=>[e(C,{span:1.5},{default:o(()=>[v((c(),b(m,{type:"primary",plain:"",icon:"Plus",onClick:me},{default:o(()=>[g("新增")]),_:1})),[[k,["system:post:add"]]])]),_:1}),e(C,{span:1.5},{default:o(()=>[v((c(),b(m,{type:"success",plain:"",icon:"Edit",disabled:l(K),onClick:t[6]||(t[6]=a=>A())},{default:o(()=>[g("修改")]),_:1},8,["disabled"])),[[k,["system:post:edit"]]])]),_:1}),e(C,{span:1.5},{default:o(()=>[v((c(),b(m,{type:"danger",plain:"",icon:"Delete",disabled:l(O),onClick:t[7]||(t[7]=a=>Q())},{default:o(()=>[g(" 删除 ")]),_:1},8,["disabled"])),[[k,["system:post:remove"]]])]),_:1}),e(C,{span:1.5},{default:o(()=>[v((c(),b(m,{type:"warning",plain:"",icon:"Download",onClick:_e},{default:o(()=>[g("导出")]),_:1})),[[k,["system:post:export"]]])]),_:1}),e(be,{showSearch:l(h),"onUpdate:showSearch":t[8]||(t[8]=a=>J(h)?h.value=a:null),onQueryTable:y},null,8,["showSearch"])]),_:1})]),default:o(()=>[v((c(),b(Ve,{data:l(B),onSelectionChange:ie},{default:o(()=>[e(f,{type:"selection",width:"55",align:"center"}),xe("",!0),e(f,{label:"岗位编码",align:"center",prop:"postCode"}),e(f,{label:"类别编码",align:"center",prop:"postCategory"}),e(f,{label:"岗位名称",align:"center",prop:"postName"}),e(f,{label:"部门",align:"center",prop:"deptName"}),e(f,{label:"排序",align:"center",prop:"postSort"}),e(f,{label:"状态",align:"center",prop:"status"},{default:o(a=>[e(ye,{options:l(S),value:a.row.status},null,8,["options","value"])]),_:1}),e(f,{label:"创建时间",align:"center",prop:"createTime",width:"180"},{default:o(a=>[q("span",null,le(s.parseTime(a.row.createTime)),1)]),_:1}),e(f,{label:"操作",width:"180",align:"center","class-name":"small-padding fixed-width"},{default:o(a=>[e(H,{content:"修改",placement:"top"},{default:o(()=>[v(e(m,{link:"",type:"primary",icon:"Edit",onClick:Se=>A(a.row)},null,8,["onClick"]),[[k,["system:post:edit"]]])]),_:2},1024),e(H,{content:"删除",placement:"top"},{default:o(()=>[v(e(m,{link:"",type:"primary",icon:"Delete",onClick:Se=>Q(a.row)},null,8,["onClick"]),[[k,["system:post:remove"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[Ne,l(E)]]),v(e(Ce,{page:l(n).pageNum,"onUpdate:page":t[9]||(t[9]=a=>l(n).pageNum=a),limit:l(n).pageSize,"onUpdate:limit":t[10]||(t[10]=a=>l(n).pageSize=a),total:l(T),onPagination:y},null,8,["page","limit","total"]),[[te,l(T)>0]])]),_:1}),e(Ie,{modelValue:l(_).visible,"onUpdate:modelValue":t[18]||(t[18]=a=>l(_).visible=a),title:l(_).title,width:"500px","append-to-body":""},{footer:o(()=>[q("div",ut,[e(m,{type:"primary",onClick:ce},{default:o(()=>[g("确 定")]),_:1}),e(m,{onClick:pe},{default:o(()=>[g("取 消")]),_:1})])]),default:o(()=>[e(M,{ref_key:"postFormRef",ref:P,model:l(d),rules:l(se),"label-width":"80px"},{default:o(()=>[e(p,{label:"岗位名称",prop:"postName"},{default:o(()=>[e(i,{modelValue:l(d).postName,"onUpdate:modelValue":t[11]||(t[11]=a=>l(d).postName=a),placeholder:"请输入岗位名称"},null,8,["modelValue"])]),_:1}),e(p,{label:"部门",prop:"deptId"},{default:o(()=>[e(G,{modelValue:l(d).deptId,"onUpdate:modelValue":t[12]||(t[12]=a=>l(d).deptId=a),data:l(I),props:{value:"id",label:"label",children:"children"},"value-key":"id",placeholder:"请选择部门","check-strictly":""},null,8,["modelValue","data"])]),_:1}),e(p,{label:"岗位编码",prop:"postCode"},{default:o(()=>[e(i,{modelValue:l(d).postCode,"onUpdate:modelValue":t[13]||(t[13]=a=>l(d).postCode=a),placeholder:"请输入编码名称"},null,8,["modelValue"])]),_:1}),e(p,{label:"类别编码",prop:"postCategory"},{default:o(()=>[e(i,{modelValue:l(d).postCategory,"onUpdate:modelValue":t[14]||(t[14]=a=>l(d).postCategory=a),placeholder:"请输入类别编码"},null,8,["modelValue"])]),_:1}),e(p,{label:"岗位顺序",prop:"postSort"},{default:o(()=>[e(ke,{modelValue:l(d).postSort,"onUpdate:modelValue":t[15]||(t[15]=a=>l(d).postSort=a),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1}),e(p,{label:"岗位状态",prop:"status"},{default:o(()=>[e(we,{modelValue:l(d).status,"onUpdate:modelValue":t[16]||(t[16]=a=>l(d).status=a)},{default:o(()=>[(c(!0),F(Z,null,ee(l(S),a=>(c(),b(he,{key:a.value,value:a.value},{default:o(()=>[g(le(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"备注",prop:"remark"},{default:o(()=>[e(i,{modelValue:l(d).remark,"onUpdate:modelValue":t[17]||(t[17]=a=>l(d).remark=a),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])]}),_:1})]),_:1})])}}});export{Pt as default};
