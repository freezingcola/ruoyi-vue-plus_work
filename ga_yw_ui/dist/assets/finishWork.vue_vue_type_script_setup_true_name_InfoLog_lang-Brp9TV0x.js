import{d as x,V as S,r as n,Y as g,aa as G,o as u,c as h,k as l,m as o,y as f,q as p,e as i,p as _,x as v,T as P,C as z,ao as H,a2 as Y,H as J,G as K,am as M}from"./index-BoCONcAc.js";/* empty css                */import{_ as Q}from"./index-DG7XexN9.js";import{_ as X}from"./index.vue_vue_type_style_index_0_lang-Dyb-nOKR.js";/* empty css                       *//* empty css                 */import"./el-form-item-l0sNRNKZ.js";import{u as Z}from"./index-hmiVVuGg.js";import{j as ee,k as te,r as ae}from"./index-DABdJVQF.js";import oe from"./process1-CwB6Ars8.js";const le={class:"p-2"},se={key:0,class:"dialog-footer"},ie={class:"dialog-footer"},re=x({name:"InfoLog"}),ke=x({...re,props:{dataObject:{type:[Object],required:!0}},emits:["ok","freshList"],setup(D,{expose:E,emit:F}){const{proxy:b}=S(),W=F,m=n(!1);n([]);const d=n(!1);n(!0),n(!0),n([]),n(0);const j=g({someProperty:""}),y=n(),e=D;g({visible:!1,title:""});const O={id:void 0,workContent:void 0,state:void 0,attachs:void 0},A=g({form:{...O},queryParams:{pageNum:1,pageSize:10,workContent:void 0,state:void 0,attachs:void 0,params:{}},rules:{workContent:[{required:!0,message:"内容不能为空",trigger:"blur"}]}}),{queryParams:ne,form:t,rules:I}=G(A),L=()=>{debugger;w(),e.dataObject.type==="receiveWork"&&(t.value.workContent="已接收，正在处理"),e.dataObject.visible=!0},N=r=>{j.someProperty=r,m.value=!0},q=()=>{w(),e.dataObject.visible=!1},w=()=>{var r;t.value={...O},(r=y.value)==null||r.resetFields()},B=()=>{var r;(r=y.value)==null||r.validate(async a=>{a&&(d.value=!0,t.value.workInfoId=e.dataObject.row.id,console.info(t),t.value.id?await Z(t.value).finally(()=>d.value=!1):e.dataObject.type==="finishAudit"?await ee(t.value).finally(()=>d.value=!1):e.dataObject.type==="finishWork"?await te(t.value).finally(()=>d.value=!1):e.dataObject.type==="receiveWork"&&(await ae(t.value).finally(()=>d.value=!1),e.dataObject.type=""),b==null||b.$modal.msgSuccess("操作成功"),e.dataObject.visible=!1,W("ok"))})};return E({show:L}),(r,a)=>{const c=z,V=H,R=Y,T=X,U=Q,$=J,k=K,C=M;return u(),h("div",le,[l(C,{title:e.dataObject.title,modelValue:e.dataObject.visible,"onUpdate:modelValue":a[4]||(a[4]=s=>e.dataObject.visible=s),width:"850px","append-to-body":""},{footer:o(()=>[e.dataObject.type==="finishAudit"||e.dataObject.type==="receiveWork"||e.dataObject.type==="finishWork"?(u(),h("div",se,[l(k,{loading:d.value,type:"primary",onClick:B},{default:o(()=>[f("确 定")]),_:1},8,["loading"]),l(k,{onClick:q},{default:o(()=>[f("取 消")]),_:1})])):p("",!0)]),default:o(()=>[l($,{ref_key:"infoLogFormRef",ref:y,model:i(t),rules:i(I),"label-width":"80px"},{default:o(()=>[e.dataObject.type==="finishAudit"?(u(),_(c,{key:0,label:"工单标题"},{default:o(()=>[v("a",{style:{color:"#00a6ff"},onClick:a[0]||(a[0]=s=>N(e.dataObject.row.number))},P(e.dataObject.row.workTitle),1)]),_:1})):p("",!0),e.dataObject.type==="finishAudit"?(u(),_(c,{key:1,label:"项目名称"},{default:o(()=>[v("span",null,P(e.dataObject.row.projectName),1)]),_:1})):p("",!0),e.dataObject.type==="finishAudit"?(u(),_(c,{key:2,label:"审核结果",prop:"menuType"},{default:o(()=>[l(R,{modelValue:i(t).state,"onUpdate:modelValue":a[1]||(a[1]=s=>i(t).state=s)},{default:o(()=>[l(V,{value:"1"},{default:o(()=>[f("通过")]),_:1}),l(V,{value:"0"},{default:o(()=>[f("不通过")]),_:1})]),_:1},8,["modelValue"])]),_:1})):p("",!0),l(c,{label:"内容",prop:"workContent"},{default:o(()=>[l(T,{modelValue:i(t).workContent,"onUpdate:modelValue":a[2]||(a[2]=s=>i(t).workContent=s),"min-height":190},null,8,["modelValue"])]),_:1}),l(c,{label:"附件",prop:"attachs"},{default:o(()=>[l(U,{modelValue:i(t).attachs,"onUpdate:modelValue":a[3]||(a[3]=s=>i(t).attachs=s)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),l(C,{modelValue:m.value,"onUpdate:modelValue":a[6]||(a[6]=s=>m.value=s),title:"流程跟踪",width:"80%"},{footer:o(()=>[v("div",ie,[l(k,{type:"primary",onClick:a[5]||(a[5]=s=>m.value=!1)},{default:o(()=>[f(" 关闭 ")]),_:1})])]),default:o(()=>[v("div",null,[m.value?(u(),_(oe,{key:0,processData:i(j)},null,8,["processData"])):p("",!0)])]),_:1},8,["modelValue"])])}}});export{ke as _};
