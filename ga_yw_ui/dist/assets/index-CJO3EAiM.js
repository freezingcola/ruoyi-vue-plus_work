import{an as V,d as oe,V as Te,aa as Z,r as p,Y as ee,b as we,$ as Ve,o as r,c as N,k as e,m as l,w as f,x as D,e as a,t as te,M as R,N as $,p as b,y as v,a7 as le,ab as ke,a3 as Ce,q as Ne,T as ae,D as Ee,C as Se,O as Be,P as Ue,G as Fe,H as Ie,a0 as De,W as Re,X as $e,a8 as qe,ac as Pe,a9 as Le,ao as ze,a2 as Ae,am as Ke,v as Oe}from"./index-BoCONcAc.js";import{_ as Qe}from"./index.vue_vue_type_style_index_0_lang-Dyb-nOKR.js";/* empty css                       *//* empty css                 */import{_ as Ge}from"./index-B1KNwlHH.js";/* empty css                 *//* empty css                    */import{_ as Me}from"./index-BXJ8XT-L.js";/* empty css                        *//* empty css               */import{_ as je}from"./index-B4NenLWv.js";/* empty css               *//* empty css                *//* empty css                */import"./el-form-item-l0sNRNKZ.js";/* empty css                    *//* empty css                */function xe(c){return V({url:"/system/notice/list",method:"get",params:c})}function He(c){return V({url:"/system/notice/"+c,method:"get"})}function We(c){return V({url:"/system/notice",method:"post",data:c})}function Xe(c){return V({url:"/system/notice",method:"put",data:c})}function Ye(c){return V({url:"/system/notice/"+c,method:"delete"})}const Je={class:"p-2"},Ze={class:"mb-[10px]"},et={class:"dialog-footer"},tt=oe({name:"Notice"}),bt=oe({...tt,setup(c){const{proxy:i}=Te(),{sys_notice_status:q,sys_notice_type:E}=Z(i==null?void 0:i.useDict("sys_notice_status","sys_notice_type")),P=p([]),S=p(!0),k=p(!0),B=p([]),L=p(!0),z=p(!0),U=p(0),A=p(),F=p(),d=ee({visible:!1,title:""}),K={noticeId:void 0,noticeTitle:"",noticeType:"",noticeContent:"",status:"0",remark:"",createByName:""},ne=ee({form:{...K},queryParams:{pageNum:1,pageSize:10,noticeTitle:"",createByName:"",status:"",noticeType:""},rules:{noticeTitle:[{required:!0,message:"公告标题不能为空",trigger:"blur"}],noticeType:[{required:!0,message:"公告类型不能为空",trigger:"change"}]}}),{queryParams:u,form:s,rules:ie}=Z(ne),h=async()=>{S.value=!0;const n=await xe(u.value);P.value=n.rows,U.value=n.total,S.value=!1},se=()=>{I(),d.visible=!1},I=()=>{var n;s.value={...K},(n=F.value)==null||n.resetFields()},C=()=>{u.value.pageNum=1,h()},ue=()=>{var n;(n=A.value)==null||n.resetFields(),C()},re=n=>{B.value=n.map(o=>o.noticeId),L.value=n.length!=1,z.value=!n.length},ce=()=>{I(),d.visible=!0,d.title="添加公告"},O=async n=>{I();const o=(n==null?void 0:n.noticeId)||B.value[0],{data:T}=await He(o);Object.assign(s.value,T),d.visible=!0,d.title="修改公告"},de=()=>{var n;(n=F.value)==null||n.validate(async o=>{o&&(s.value.noticeId?await Xe(s.value):await We(s.value),i==null||i.$modal.msgSuccess("操作成功"),d.visible=!1,await h())})},Q=async n=>{const o=(n==null?void 0:n.noticeId)||B.value;await(i==null?void 0:i.$modal.confirm('是否确认删除公告编号为"'+o+'"的数据项？')),await Ye(o),await h(),i==null||i.$modal.msgSuccess("删除成功")};return we(()=>{h()}),(n,o)=>{var Y,J;const T=Ee,_=Se,G=Be,M=Ue,m=Fe,j=Ie,x=De,y=Re,me=je,H=$e,g=qe,W=Me,X=Pe,pe=Le,_e=Ge,fe=ze,ve=Ae,ye=Qe,ge=Ke,w=Ve("hasPermi"),be=Oe;return r(),N("div",Je,[e(ke,{"enter-active-class":(Y=a(i))==null?void 0:Y.animate.searchAnimate.enter,"leave-active-class":(J=a(i))==null?void 0:J.animate.searchAnimate.leave},{default:l(()=>[f(D("div",Ze,[e(x,{shadow:"hover"},{default:l(()=>[e(j,{ref_key:"queryFormRef",ref:A,model:a(u),inline:!0},{default:l(()=>[e(_,{label:"公告标题",prop:"noticeTitle"},{default:l(()=>[e(T,{modelValue:a(u).noticeTitle,"onUpdate:modelValue":o[0]||(o[0]=t=>a(u).noticeTitle=t),placeholder:"请输入公告标题",clearable:"",onKeyup:te(C,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"操作人员",prop:"createByName"},{default:l(()=>[e(T,{modelValue:a(u).createByName,"onUpdate:modelValue":o[1]||(o[1]=t=>a(u).createByName=t),placeholder:"请输入操作人员",clearable:"",onKeyup:te(C,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"类型",prop:"noticeType"},{default:l(()=>[e(M,{modelValue:a(u).noticeType,"onUpdate:modelValue":o[2]||(o[2]=t=>a(u).noticeType=t),placeholder:"公告类型",clearable:""},{default:l(()=>[(r(!0),N(R,null,$(a(E),t=>(r(),b(G,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,null,{default:l(()=>[e(m,{type:"primary",icon:"Search",onClick:C},{default:l(()=>[v("搜索")]),_:1}),e(m,{icon:"Refresh",onClick:ue},{default:l(()=>[v("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})],512),[[le,a(k)]])]),_:1},8,["enter-active-class","leave-active-class"]),e(x,{shadow:"hover"},{header:l(()=>[e(H,{gutter:10,class:"mb8"},{default:l(()=>[e(y,{span:1.5},{default:l(()=>[f((r(),b(m,{type:"primary",plain:"",icon:"Plus",onClick:ce},{default:l(()=>[v("新增")]),_:1})),[[w,["system:notice:add"]]])]),_:1}),e(y,{span:1.5},{default:l(()=>[f((r(),b(m,{type:"success",plain:"",icon:"Edit",disabled:a(L),onClick:o[3]||(o[3]=t=>O())},{default:l(()=>[v("修改")]),_:1},8,["disabled"])),[[w,["system:notice:edit"]]])]),_:1}),e(y,{span:1.5},{default:l(()=>[f((r(),b(m,{type:"danger",plain:"",icon:"Delete",disabled:a(z),onClick:o[4]||(o[4]=t=>Q())},{default:l(()=>[v(" 删除 ")]),_:1},8,["disabled"])),[[w,["system:notice:remove"]]])]),_:1}),e(me,{showSearch:a(k),"onUpdate:showSearch":o[5]||(o[5]=t=>Ce(k)?k.value=t:null),onQueryTable:h},null,8,["showSearch"])]),_:1})]),default:l(()=>[f((r(),b(pe,{data:a(P),onSelectionChange:re},{default:l(()=>[e(g,{type:"selection",width:"55",align:"center"}),Ne("",!0),e(g,{label:"公告标题",align:"center",prop:"noticeTitle","show-overflow-tooltip":!0}),e(g,{label:"公告类型",align:"center",prop:"noticeType",width:"100"},{default:l(t=>[e(W,{options:a(E),value:t.row.noticeType},null,8,["options","value"])]),_:1}),e(g,{label:"状态",align:"center",prop:"status",width:"100"},{default:l(t=>[e(W,{options:a(q),value:t.row.status},null,8,["options","value"])]),_:1}),e(g,{label:"创建者",align:"center",prop:"createByName",width:"100"}),e(g,{label:"创建时间",align:"center",prop:"createTime",width:"100"},{default:l(t=>[D("span",null,ae(n.parseTime(t.row.createTime,"{y}-{m}-{d}")),1)]),_:1}),e(g,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:l(t=>[e(X,{content:"修改",placement:"top"},{default:l(()=>[f(e(m,{link:"",type:"primary",icon:"Edit",onClick:he=>O(t.row)},null,8,["onClick"]),[[w,["system:notice:edit"]]])]),_:2},1024),e(X,{content:"删除",placement:"top"},{default:l(()=>[f(e(m,{link:"",type:"primary",icon:"Delete",onClick:he=>Q(t.row)},null,8,["onClick"]),[[w,["system:notice:remove"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[be,a(S)]]),f(e(_e,{page:a(u).pageNum,"onUpdate:page":o[6]||(o[6]=t=>a(u).pageNum=t),limit:a(u).pageSize,"onUpdate:limit":o[7]||(o[7]=t=>a(u).pageSize=t),total:a(U),onPagination:h},null,8,["page","limit","total"]),[[le,a(U)>0]])]),_:1}),e(ge,{modelValue:a(d).visible,"onUpdate:modelValue":o[12]||(o[12]=t=>a(d).visible=t),title:a(d).title,width:"780px","append-to-body":""},{footer:l(()=>[D("div",et,[e(m,{type:"primary",onClick:de},{default:l(()=>[v("确 定")]),_:1}),e(m,{onClick:se},{default:l(()=>[v("取 消")]),_:1})])]),default:l(()=>[e(j,{ref_key:"noticeFormRef",ref:F,model:a(s),rules:a(ie),"label-width":"80px"},{default:l(()=>[e(H,null,{default:l(()=>[e(y,{span:12},{default:l(()=>[e(_,{label:"公告标题",prop:"noticeTitle"},{default:l(()=>[e(T,{modelValue:a(s).noticeTitle,"onUpdate:modelValue":o[8]||(o[8]=t=>a(s).noticeTitle=t),placeholder:"请输入公告标题"},null,8,["modelValue"])]),_:1})]),_:1}),e(y,{span:12},{default:l(()=>[e(_,{label:"公告类型",prop:"noticeType"},{default:l(()=>[e(M,{modelValue:a(s).noticeType,"onUpdate:modelValue":o[9]||(o[9]=t=>a(s).noticeType=t),placeholder:"请选择"},{default:l(()=>[(r(!0),N(R,null,$(a(E),t=>(r(),b(G,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(y,{span:24},{default:l(()=>[e(_,{label:"状态"},{default:l(()=>[e(ve,{modelValue:a(s).status,"onUpdate:modelValue":o[10]||(o[10]=t=>a(s).status=t)},{default:l(()=>[(r(!0),N(R,null,$(a(q),t=>(r(),b(fe,{key:t.value,value:t.value},{default:l(()=>[v(ae(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(y,{span:24},{default:l(()=>[e(_,{label:"内容"},{default:l(()=>[e(ye,{modelValue:a(s).noticeContent,"onUpdate:modelValue":o[11]||(o[11]=t=>a(s).noticeContent=t),"min-height":192},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{bt as default};
