import{d as F,u as R,V as O,r as i,o as w,p as N,m as o,k as e,e as c,a3 as S,c as H,M,N as Q,x as g,T as C,y as k,a4 as K,a8 as W,D as z,O as J,P as A,F as X,a9 as Y,a5 as Z,G as ee,H as le,a0 as ae}from"./index-BoCONcAc.js";/* empty css                *//* empty css                *//* empty css                    *//* empty css                 *//* empty css                    *//* empty css                        */import{g as te,u as oe}from"./index-D0p_aBUM.js";import{o as ne}from"./index-BJP1ai_O.js";import{_ as x}from"./basicInfoForm.vue_vue_type_script_setup_true_lang-DgD4sIgq.js";import{_ as B}from"./genInfoForm.vue_vue_type_script_setup_true_lang-B902yqL4.js";/* empty css               *//* empty css               */import"./el-form-item-l0sNRNKZ.js";/* empty css                 *//* empty css                *//* empty css                       */import"./index-CbY-aW9v.js";const ue={style:{float:"left"}},de={style:{float:"right",color:"#8492a6","font-size":"13px"}},me={style:{"text-align":"center","margin-left":"-100px","margin-top":"10px"}},re=F({name:"GenEdit"}),ke=F({...re,setup(se){const _=R(),{proxy:d}=O(),v=i("columnInfo"),D=i(document.documentElement.scrollHeight-245+"px"),h=i([]),V=i([]),E=i([]),s=i({}),y=i(x),T=i(B),L=()=>{const m=y.value.$refs.basicInfoForm,u=T.value.$refs.genInfoForm;Promise.all([m,u].map($)).then(async r=>{var b;if(r.every(a=>!!a)){const a=Object.assign({},s.value);a.columns=V.value,a.params={treeCode:(b=s.value)==null?void 0:b.treeCode,treeName:s.value.treeName,treeParentCode:s.value.treeParentCode,parentMenuId:s.value.parentMenuId};const p=await oe(a);d==null||d.$modal.msgSuccess(p.msg),p.code===200&&U()}else d==null||d.$modal.msgError("表单校验未通过，请重新检查提交内容")})},$=m=>new Promise(u=>{m.validate(r=>{u(r)})}),U=()=>{const m={path:"/tool/gen",query:{t:Date.now(),pageNum:_.query.pageNum}};d==null||d.$tab.closeOpenPage(m)};return(async()=>{const m=_.params&&_.params.tableId;if(m){const u=await te(m);V.value=u.data.rows,s.value=u.data.info,h.value=u.data.tables;const r=await ne();E.value=r.data}})(),(m,u)=>{const r=K,n=W,b=z,a=J,p=A,f=X,P=Y,j=Z,I=ee,q=le,G=ae;return w(),N(G,null,{default:o(()=>[e(j,{modelValue:c(v),"onUpdate:modelValue":u[0]||(u[0]=l=>S(v)?v.value=l:null)},{default:o(()=>[e(r,{label:"基本信息",name:"basic"},{default:o(()=>[e(x,{ref_key:"basicInfo",ref:y,info:c(s)},null,8,["info"])]),_:1}),e(r,{label:"字段信息",name:"columnInfo"},{default:o(()=>[e(P,{ref:"dragTable",data:c(V),"row-key":"columnId","max-height":c(D)},{default:o(()=>[e(n,{label:"序号",type:"index","min-width":"5%"}),e(n,{label:"字段列名",prop:"columnName","min-width":"10%","show-overflow-tooltip":!0}),e(n,{label:"字段描述","min-width":"10%"},{default:o(l=>[e(b,{modelValue:l.row.columnComment,"onUpdate:modelValue":t=>l.row.columnComment=t},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"物理类型",prop:"columnType","min-width":"10%","show-overflow-tooltip":!0}),e(n,{label:"Java类型","min-width":"11%"},{default:o(l=>[e(p,{modelValue:l.row.javaType,"onUpdate:modelValue":t=>l.row.javaType=t},{default:o(()=>[e(a,{label:"Long",value:"Long"}),e(a,{label:"String",value:"String"}),e(a,{label:"Integer",value:"Integer"}),e(a,{label:"Double",value:"Double"}),e(a,{label:"BigDecimal",value:"BigDecimal"}),e(a,{label:"Date",value:"Date"}),e(a,{label:"Boolean",value:"Boolean"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"java属性","min-width":"10%"},{default:o(l=>[e(b,{modelValue:l.row.javaField,"onUpdate:modelValue":t=>l.row.javaField=t},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"插入","min-width":"5%"},{default:o(l=>[e(f,{"true-label":"1","false-label":"0",modelValue:l.row.isInsert,"onUpdate:modelValue":t=>l.row.isInsert=t},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"编辑","min-width":"5%"},{default:o(l=>[e(f,{"true-label":"1","false-label":"0",modelValue:l.row.isEdit,"onUpdate:modelValue":t=>l.row.isEdit=t},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"列表","min-width":"5%"},{default:o(l=>[e(f,{"true-label":"1","false-label":"0",modelValue:l.row.isList,"onUpdate:modelValue":t=>l.row.isList=t},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"查询","min-width":"5%"},{default:o(l=>[e(f,{"true-label":"1","false-label":"0",modelValue:l.row.isQuery,"onUpdate:modelValue":t=>l.row.isQuery=t},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"查询方式","min-width":"10%"},{default:o(l=>[e(p,{modelValue:l.row.queryType,"onUpdate:modelValue":t=>l.row.queryType=t},{default:o(()=>[e(a,{label:"=",value:"EQ"}),e(a,{label:"!=",value:"NE"}),e(a,{label:">",value:"GT"}),e(a,{label:">=",value:"GE"}),e(a,{label:"<",value:"LT"}),e(a,{label:"<=",value:"LE"}),e(a,{label:"LIKE",value:"LIKE"}),e(a,{label:"BETWEEN",value:"BETWEEN"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"必填","min-width":"5%"},{default:o(l=>[e(f,{"true-label":"1","false-label":"0",modelValue:l.row.isRequired,"onUpdate:modelValue":t=>l.row.isRequired=t},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"显示类型","min-width":"12%"},{default:o(l=>[e(p,{modelValue:l.row.htmlType,"onUpdate:modelValue":t=>l.row.htmlType=t},{default:o(()=>[e(a,{label:"文本框",value:"input"}),e(a,{label:"文本域",value:"textarea"}),e(a,{label:"下拉框",value:"select"}),e(a,{label:"单选框",value:"radio"}),e(a,{label:"复选框",value:"checkbox"}),e(a,{label:"日期控件",value:"datetime"}),e(a,{label:"图片上传",value:"imageUpload"}),e(a,{label:"文件上传",value:"fileUpload"}),e(a,{label:"富文本控件",value:"editor"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"字典类型","min-width":"12%"},{default:o(l=>[e(p,{modelValue:l.row.dictType,"onUpdate:modelValue":t=>l.row.dictType=t,clearable:"",filterable:"",placeholder:"请选择"},{default:o(()=>[(w(!0),H(M,null,Q(c(E),t=>(w(),N(a,{key:t.dictType,label:t.dictName,value:t.dictType},{default:o(()=>[g("span",ue,C(t.dictName),1),g("span",de,C(t.dictType),1)]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data","max-height"])]),_:1}),e(r,{label:"生成信息",name:"genInfo"},{default:o(()=>[e(B,{ref_key:"genInfo",ref:T,info:c(s),tables:c(h)},null,8,["info","tables"])]),_:1})]),_:1},8,["modelValue"]),e(q,{"label-width":"100px"},{default:o(()=>[g("div",me,[e(I,{type:"primary",onClick:u[1]||(u[1]=l=>L())},{default:o(()=>[k("提交")]),_:1}),e(I,{onClick:u[2]||(u[2]=l=>U())},{default:o(()=>[k("返回")]),_:1})])]),_:1})]),_:1})}}});export{ke as default};
