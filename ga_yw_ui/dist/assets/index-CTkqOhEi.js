import{d as V,V as R,aa as U,r as p,b as q,$ as x,o as N,c as P,x as g,k as e,m as l,e as o,t as k,y as C,w,p as Q,T as S,a7 as G,K as H,D as M,C as O,G as j,H as A,a0 as J,a8 as W,ac as X,a9 as Y,v as Z}from"./index-BoCONcAc.js";import{_ as ee}from"./index-B1KNwlHH.js";/* empty css                 *//* empty css                    */import{_ as oe}from"./index-BXJ8XT-L.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-l0sNRNKZ.js";import{l as te,f as ae}from"./index-B0rbEux7.js";const le={class:"p-2"},ne={class:"mb-[10px]"},re=V({name:"Online"}),be=V({...re,setup(se){const{proxy:i}=R(),{sys_device_type:E}=U(i==null?void 0:i.useDict("sys_device_type")),v=p([]),c=p(!0),m=p(0),b=p(),t=p({pageNum:1,pageSize:10,ipaddr:"",userName:""}),d=async()=>{c.value=!0;const r=await te(t.value);v.value=r.rows,m.value=r.total,c.value=!1},u=()=>{t.value.pageNum=1,d()},T=()=>{var r;(r=b.value)==null||r.resetFields(),u()},L=async r=>{const[s]=await H(i==null?void 0:i.$modal.confirm('是否确认强退名称为"'+r.userName+'"的用户?'));s||(await ae(r.tokenId),await d(),i==null||i.$modal.msgSuccess("删除成功"))};return q(()=>{d()}),(r,s)=>{const h=M,_=O,f=j,z=A,y=J,n=W,D=oe,F=X,B=Y,I=ee,K=x("hasPermi"),$=Z;return N(),P("div",le,[g("div",ne,[e(y,{shadow:"hover"},{default:l(()=>[e(z,{ref_key:"queryFormRef",ref:b,model:o(t),inline:!0},{default:l(()=>[e(_,{label:"登录地址",prop:"ipaddr"},{default:l(()=>[e(h,{modelValue:o(t).ipaddr,"onUpdate:modelValue":s[0]||(s[0]=a=>o(t).ipaddr=a),placeholder:"请输入登录地址",clearable:"",onKeyup:k(u,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"用户名称",prop:"userName"},{default:l(()=>[e(h,{modelValue:o(t).userName,"onUpdate:modelValue":s[1]||(s[1]=a=>o(t).userName=a),placeholder:"请输入用户名称",clearable:"",onKeyup:k(u,["enter"])},null,8,["modelValue"])]),_:1}),e(_,null,{default:l(()=>[e(f,{type:"primary",icon:"Search",onClick:u},{default:l(()=>[C("搜索")]),_:1}),e(f,{icon:"Refresh",onClick:T},{default:l(()=>[C("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),e(y,{shadow:"hover"},{default:l(()=>[w((N(),Q(B,{data:o(v).slice((o(t).pageNum-1)*o(t).pageSize,o(t).pageNum*o(t).pageSize),style:{width:"100%"}},{default:l(()=>[e(n,{label:"序号",width:"50",type:"index",align:"center"},{default:l(a=>[g("span",null,S((o(t).pageNum-1)*o(t).pageSize+a.$index+1),1)]),_:1}),e(n,{label:"会话编号",align:"center",prop:"tokenId","show-overflow-tooltip":!0}),e(n,{label:"登录名称",align:"center",prop:"userName","show-overflow-tooltip":!0}),e(n,{label:"客户端",align:"center",prop:"clientKey","show-overflow-tooltip":!0}),e(n,{label:"设备类型",align:"center"},{default:l(a=>[e(D,{options:o(E),value:a.row.deviceType},null,8,["options","value"])]),_:1}),e(n,{label:"所属部门",align:"center",prop:"deptName","show-overflow-tooltip":!0}),e(n,{label:"主机",align:"center",prop:"ipaddr","show-overflow-tooltip":!0}),e(n,{label:"登录地点",align:"center",prop:"loginLocation","show-overflow-tooltip":!0}),e(n,{label:"操作系统",align:"center",prop:"os","show-overflow-tooltip":!0}),e(n,{label:"浏览器",align:"center",prop:"browser","show-overflow-tooltip":!0}),e(n,{label:"登录时间",align:"center",prop:"loginTime",width:"180"},{default:l(a=>[g("span",null,S(r.parseTime(a.row.loginTime)),1)]),_:1}),e(n,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:l(a=>[e(F,{content:"强退",placement:"top"},{default:l(()=>[w(e(f,{link:"",type:"primary",icon:"Delete",onClick:ie=>L(a.row)},null,8,["onClick"]),[[K,["monitor:online:forceLogout"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[$,o(c)]]),w(e(I,{page:o(t).pageNum,"onUpdate:page":s[2]||(s[2]=a=>o(t).pageNum=a),limit:o(t).pageSize,"onUpdate:limit":s[3]||(s[3]=a=>o(t).pageSize=a),total:o(m)},null,8,["page","limit","total"]),[[G,o(m)>0]])]),_:1})])}}});export{be as default};
