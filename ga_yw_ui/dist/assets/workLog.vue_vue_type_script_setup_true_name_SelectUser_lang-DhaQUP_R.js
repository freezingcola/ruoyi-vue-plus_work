import{d as E,V as j,r as i,Y as _,aa as G,$ as O,o as f,p as g,m as n,k as a,e,x as v,y as X,w as b,T as Y,a7 as A,a8 as J,G as K,ac as Q,a9 as W,X as Z,am as ee,C as te,H as oe,v as ae}from"./index-BoCONcAc.js";/* empty css                */import"./el-form-item-l0sNRNKZ.js";/* empty css               */import{_ as le}from"./index-B1KNwlHH.js";/* empty css                 *//* empty css                    */import{_ as ne}from"./index-Xwb6tvPf.js";/* empty css                        */import{l as ie,g as se}from"./index-hmiVVuGg.js";const re={class:"dialog-footer"},de=["innerHTML"],me=E({name:"SelectUser"}),ke=E({...me,setup(pe,{expose:U}){j();const w=i([]);i(!1);const p=i(!0),V=i([]),I=i(!0),S=i(!0),u=i(0),N=i(),m=_({visible:!1,title:""}),c=_({visible:!1,title:""}),P=_({form:{},queryParams:{pageNum:1,pageSize:10,workInfoId:null,params:{}},rules:void 0}),{queryParams:r,form:d,rules:B}=G(P),h=async()=>{p.value=!0;const l=await ie(r.value);w.value=l.rows,u.value=l.total,p.value=!1},D=l=>{V.value=l.map(o=>o.id),I.value=l.length!=1,S.value=!l.length},F=async l=>{const o=(l==null?void 0:l.id)||V.value[0],s=await se(o);Object.assign(d.value,s.data),c.visible=!0};return U({show:l=>{r.value.workInfoId=l.id,h(),m.visible=!0}}),(l,o)=>{const s=J,y=ne,k=K,R=Q,z=W,H=le,C=Z,L=ee,T=te,$=oe,q=O("hasPermi"),M=ae;return f(),g(C,null,{default:n(()=>[a(L,{modelValue:e(m).visible,"onUpdate:modelValue":o[3]||(o[3]=t=>e(m).visible=t),title:"工作进度",width:"800px",top:"5vh","append-to-body":""},{footer:n(()=>[v("div",re,[a(k,{type:"primary",onClick:o[2]||(o[2]=t=>e(m).visible=!1)},{default:n(()=>[X("确 定")]),_:1})])]),default:n(()=>[a(C,null,{default:n(()=>[b((f(),g(z,{data:e(w),onSelectionChange:D},{default:n(()=>[a(s,{type:"selection",width:"55",align:"center"}),(f(),g(s,{key:0,label:"id",align:"center",prop:"id"})),a(s,{label:"附件",align:"center"},{default:n(t=>[a(y,{modelValue:t.row.attachs,"onUpdate:modelValue":x=>t.row.attachs=x},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(s,{label:"创建时间",align:"center",prop:"createTime",width:"200"},{default:n(t=>[v("span",null,Y(l.parseTime(t.row.createTime)),1)]),_:1}),a(s,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:n(t=>[a(R,{content:"查看",placement:"top"},{default:n(()=>[b(a(k,{link:"",type:"primary",icon:"Edit",onClick:x=>F(t.row)},null,8,["onClick"]),[[q,["infolog:infoLog:edit"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[M,e(p)]]),b(a(H,{total:e(u),page:e(r).pageNum,"onUpdate:page":o[0]||(o[0]=t=>e(r).pageNum=t),limit:e(r).pageSize,"onUpdate:limit":o[1]||(o[1]=t=>e(r).pageSize=t),onPagination:h},null,8,["total","page","limit"]),[[A,e(u)>0]])]),_:1})]),_:1},8,["modelValue"]),a(L,{title:"查看",modelValue:e(c).visible,"onUpdate:modelValue":o[5]||(o[5]=t=>e(c).visible=t),width:"800px","append-to-body":""},{default:n(()=>[a($,{ref_key:"infoLogFormRef",ref:N,model:e(d),rules:e(B),"label-width":"80px"},{default:n(()=>[a(T,{label:"内容"},{default:n(()=>[v("div",{innerHTML:e(d).workContent},null,8,de)]),_:1}),a(T,{label:"附件",prop:"attachs"},{default:n(()=>[a(y,{modelValue:e(d).attachs,"onUpdate:modelValue":o[4]||(o[4]=t=>e(d).attachs=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])]),_:1})}}});export{ke as _};
