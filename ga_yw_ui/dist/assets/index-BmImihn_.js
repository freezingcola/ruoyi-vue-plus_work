import{d as _,u as y,r as p,b as w,n as h,w as k,e as v,o as b,c as x,g as I,v as T,f as E,l as B,s as C,E as n}from"./index-BoCONcAc.js";const q={class:"social-callback"},R=_({__name:"index",setup(S){const t=y(),s=p(!0),r=t.query.code,i=t.query.state,l=t.query.source,d=localStorage.getItem("tenantId")?localStorage.getItem("tenantId"):"000000",o=async e=>{if(e.code!==200)throw new Error(e.msg);e.data!==null&&C(e.data.access_token),n.success(e.msg),setTimeout(()=>{location.href="/index"},2e3)},c=e=>{n.error(e.message),setTimeout(()=>{location.href="/index"},2e3)},u=async e=>{try{const a=await E(e);await o(a),s.value=!1}catch(a){c(a)}},g=async e=>{try{const a=await B(e);await o(a),s.value=!1}catch(a){c(a)}},f=async()=>{const e={socialCode:r,socialState:i,tenantId:d,source:l,clientId:"e5cd7e4891bf95d1d19206ce24a7b32e",grantType:"social"};I()?await u(e):await g(e)};return w(()=>{h(()=>{f()})}),(e,a)=>{const m=T;return k((b(),x("div",q,null,512)),[[m,v(s)]])}}});export{R as default};
