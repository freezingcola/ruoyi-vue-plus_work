import{d as O,V as X,aa as $,r,b as j,o as c,c as B,k as e,m as o,w as f,x as F,e as a,t as b,y as d,a7 as V,ab as Z,a3 as ee,p as k,T as g,M as te,N as ae,Y as oe,D as ne,C as le,G as se,H as ie,a0 as re,X as pe,a8 as ue,ak as me,a9 as ce,v as de}from"./index-BoCONcAc.js";import{_ as _e}from"./index-B1KNwlHH.js";/* empty css                 *//* empty css                    */import{_ as fe}from"./index-BXJ8XT-L.js";/* empty css                        *//* empty css               */import{_ as ge}from"./index-B4NenLWv.js";/* empty css                *//* empty css                */import"./el-form-item-l0sNRNKZ.js";import{p as ve}from"./index-DSKxzbdu.js";import{w as we}from"./index-BWlz0r_B.js";/* empty css                */const ye={class:"p-2"},he={class:"mb-[10px]"},ze=O({__name:"taskWaiting",setup(be){const{proxy:u}=X(),{wf_business_status:R}=$(u==null?void 0:u.useDict("wf_business_status")),N=r(),v=r(!0),U=r([]),z=r(!0),I=r(!0),m=r(!0),w=r(0),C=r([]),s=r({pageNum:1,pageSize:10,name:void 0,processDefinitionName:void 0,processDefinitionKey:void 0});j(()=>{D()});const p=()=>{D()},L=()=>{var l;(l=N.value)==null||l.resetFields(),s.value.pageNum=1,s.value.pageSize=10,p()},Y=l=>{U.value=l.map(n=>n.id),z.value=l.length!==1,I.value=!l.length},D=()=>{v.value=!0,ve(s.value).then(l=>{C.value=l.rows,w.value=l.total,v.value=!1})},q=async l=>{const n=oe({wfDefinitionConfigVo:l.wfDefinitionConfigVo,wfNodeConfigVo:l.wfNodeConfigVo,businessKey:l.businessKey,taskId:l.id,type:"approval"});we.routerJump(n,u)};return(l,n)=>{var S,T;const y=ne,_=le,h=se,P=ie,E=re,Q=ge,W=pe,i=ue,K=me,A=fe,J=ce,M=_e,G=de;return c(),B("div",ye,[e(Z,{"enter-active-class":(S=a(u))==null?void 0:S.animate.searchAnimate.enter,"leave-active-class":(T=a(u))==null?void 0:T.animate.searchAnimate.leave},{default:o(()=>[f(F("div",he,[e(E,{shadow:"hover"},{default:o(()=>[f(e(P,{ref_key:"queryFormRef",ref:N,model:a(s),inline:!0},{default:o(()=>[e(_,{label:"任务名称",prop:"name"},{default:o(()=>[e(y,{modelValue:a(s).name,"onUpdate:modelValue":n[0]||(n[0]=t=>a(s).name=t),placeholder:"请输入任务名称",onKeyup:b(p,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"流程定义名称","label-width":"100",prop:"processDefinitionName"},{default:o(()=>[e(y,{modelValue:a(s).processDefinitionName,"onUpdate:modelValue":n[1]||(n[1]=t=>a(s).processDefinitionName=t),placeholder:"请输入流程定义名称",onKeyup:b(p,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"流程定义KEY","label-width":"100",prop:"processDefinitionKey"},{default:o(()=>[e(y,{modelValue:a(s).processDefinitionKey,"onUpdate:modelValue":n[2]||(n[2]=t=>a(s).processDefinitionKey=t),placeholder:"请输入流程定义KEY",onKeyup:b(p,["enter"])},null,8,["modelValue"])]),_:1}),e(_,null,{default:o(()=>[e(h,{type:"primary",icon:"Search",onClick:p},{default:o(()=>[d("搜索")]),_:1}),e(h,{icon:"Refresh",onClick:L},{default:o(()=>[d("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[V,a(m)]])]),_:1})],512),[[V,a(m)]])]),_:1},8,["enter-active-class","leave-active-class"]),e(E,{shadow:"hover"},{header:o(()=>[e(W,{gutter:10,class:"mb8"},{default:o(()=>[e(Q,{showSearch:a(m),"onUpdate:showSearch":n[3]||(n[3]=t=>ee(m)?m.value=t:null),onQueryTable:p},null,8,["showSearch"])]),_:1})]),default:o(()=>[f((c(),k(J,{border:"",data:a(C),onSelectionChange:Y},{default:o(()=>[e(i,{type:"selection",width:"55",align:"center"}),e(i,{align:"center",type:"index",label:"序号",width:"60"}),e(i,{"show-overflow-tooltip":!0,align:"center",label:"流程定义名称"},{default:o(t=>[F("span",null,g(t.row.processDefinitionName)+"v"+g(t.row.processDefinitionVersion)+".0",1)]),_:1}),e(i,{align:"center",prop:"processDefinitionKey",label:"流程定义KEY"}),e(i,{align:"center",prop:"name",label:"任务名称"}),e(i,{align:"center",prop:"assigneeName",label:"办理人"},{default:o(t=>[t.row.participantVo&&t.row.assignee===null?(c(!0),B(te,{key:0},ae(t.row.participantVo.candidateName,(x,H)=>(c(),k(K,{key:H,type:"success"},{default:o(()=>[d(g(x),1)]),_:2},1024))),128)):(c(),k(K,{key:1,type:"success"},{default:o(()=>[d(g(t.row.assigneeName||"无"),1)]),_:2},1024))]),_:1}),e(i,{align:"center",label:"流程状态","min-width":"70"},{default:o(t=>[e(A,{options:a(R),value:t.row.businessStatus},null,8,["options","value"])]),_:1}),e(i,{align:"center",prop:"createTime",label:"创建时间",width:"160"}),e(i,{label:"操作",align:"center",width:"200"},{default:o(t=>[e(h,{type:"primary",size:"small",icon:"Edit",onClick:x=>q(t.row)},{default:o(()=>[d("办理")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[G,a(v)]]),f(e(M,{page:a(s).pageNum,"onUpdate:page":n[4]||(n[4]=t=>a(s).pageNum=t),limit:a(s).pageSize,"onUpdate:limit":n[5]||(n[5]=t=>a(s).pageSize=t),total:a(w),onPagination:p},null,8,["page","limit","total"]),[[V,a(w)>0]])]),_:1})])}}});export{ze as default};
