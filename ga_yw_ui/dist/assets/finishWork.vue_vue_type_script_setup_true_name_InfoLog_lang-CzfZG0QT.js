import{d as V,V as U,r as n,Y as k,aa as W,o as p,c as g,k as a,m as o,e as s,y as u,q as y,p as D,ao as G,a2 as P,C as S,H as T,G as $,am as z}from"./index-BoCONcAc.js";/* empty css                */import{_ as H}from"./index-DG7XexN9.js";import{_ as Y}from"./index.vue_vue_type_style_index_0_lang-Dyb-nOKR.js";import"./el-form-item-l0sNRNKZ.js";/* empty css                       *//* empty css                 */import{u as J}from"./index-hmiVVuGg.js";import{j as K,k as M}from"./index-DABdJVQF.js";const Q={class:"p-2"},X={key:0,class:"dialog-footer"},Z=V({name:"InfoLog"}),ue=V({...Z,props:{dataObject:{type:[Object],required:!0}},emits:["ok","freshList"],setup(j,{expose:h,emit:w}){const{proxy:m}=U(),O=w;n([]);const d=n(!1);n(!0),n(!0),n([]),n(0);const c=n(),t=j;k({visible:!1,title:""});const _={id:void 0,workContent:void 0,state:void 0,attachs:void 0},C=k({form:{..._},queryParams:{pageNum:1,pageSize:10,workContent:void 0,state:void 0,attachs:void 0,params:{}},rules:{workContent:[{required:!0,message:"内容不能为空",trigger:"blur"}]}}),{queryParams:ee,form:e,rules:E}=W(C),F=()=>{t.dataObject.visible=!0},x=()=>{I(),t.dataObject.visible=!1},I=()=>{var r;e.value={..._},(r=c.value)==null||r.resetFields()},L=()=>{var r;(r=c.value)==null||r.validate(async l=>{l&&(d.value=!0,e.value.workInfoId=t.dataObject.row.id,console.info(e),e.value.id?await J(e.value).finally(()=>d.value=!1):t.dataObject.type==="finishAudit"?await K(e.value).finally(()=>d.value=!1):t.dataObject.type==="finishWork"&&await M(e.value).finally(()=>d.value=!1),m==null||m.$modal.msgSuccess("操作成功"),t.dataObject.visible=!1,O("ok"))})};return h({show:F}),(r,l)=>{const v=G,q=P,f=S,R=Y,A=H,B=T,b=$,N=z;return p(),g("div",Q,[a(N,{title:t.dataObject.title,modelValue:t.dataObject.visible,"onUpdate:modelValue":l[3]||(l[3]=i=>t.dataObject.visible=i),width:"850px","append-to-body":""},{footer:o(()=>[t.dataObject.type==="finishAudit"||t.dataObject.type==="finishWork"?(p(),g("div",X,[a(b,{loading:s(d),type:"primary",onClick:L},{default:o(()=>[u("确 定")]),_:1},8,["loading"]),a(b,{onClick:x},{default:o(()=>[u("取 消")]),_:1})])):y("",!0)]),default:o(()=>[a(B,{ref_key:"infoLogFormRef",ref:c,model:s(e),rules:s(E),"label-width":"80px"},{default:o(()=>[t.dataObject.type==="finishAudit"?(p(),D(f,{key:0,label:"审核结果",prop:"menuType"},{default:o(()=>[a(q,{modelValue:s(e).state,"onUpdate:modelValue":l[0]||(l[0]=i=>s(e).state=i)},{default:o(()=>[a(v,{value:"1"},{default:o(()=>[u("通过")]),_:1}),a(v,{value:"0"},{default:o(()=>[u("不通过")]),_:1})]),_:1},8,["modelValue"])]),_:1})):y("",!0),a(f,{label:"内容"},{default:o(()=>[a(R,{modelValue:s(e).workContent,"onUpdate:modelValue":l[1]||(l[1]=i=>s(e).workContent=i),"min-height":190},null,8,["modelValue"])]),_:1}),a(f,{label:"附件",prop:"attachs"},{default:o(()=>[a(A,{modelValue:s(e).attachs,"onUpdate:modelValue":l[2]||(l[2]=i=>s(e).attachs=i)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{ue as _};
