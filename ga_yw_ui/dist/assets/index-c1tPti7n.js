import{d as H,V as ce,aa as I,r as d,Y as Q,b as fe,$ as _e,o as u,c as G,k as e,m as o,w as c,x as K,e as a,t as ge,y as f,a7 as j,ab as ve,p as _,a3 as be,M as we,N as ye,T as ke,D as Ve,C as he,G as Ce,H as Me,W as Ne,X as Ee,a8 as Fe,ac as Te,a9 as Se,a0 as De,ao as Ue,a2 as Re,am as $e,v as qe}from"./index-BoCONcAc.js";/* empty css                       *//* empty css                 *//* empty css                */import{_ as Pe}from"./index-B1KNwlHH.js";/* empty css                 *//* empty css                    */import{_ as xe}from"./index-BXJ8XT-L.js";/* empty css                        *//* empty css               */import{_ as Be}from"./index-B4NenLWv.js";/* empty css               *//* empty css                */import"./el-form-item-l0sNRNKZ.js";import{l as Le,g as ze,u as Ae,a as Ie,d as Qe}from"./index-C66yRhhZ.js";/* empty css                */const Ge={class:"p-2"},Ke={class:"search"},je={class:"dialog-footer"},He=H({name:"FormManage"}),ua=H({...He,setup(Oe){const{proxy:s}=ce(),{wf_form_type:S}=I(s==null?void 0:s.useDict("wf_form_type")),D=d([]),k=d(!1),V=d(!0),h=d(!0),M=d([]),U=d(!0),R=d(!0),N=d(0),$=d(),E=d(),p=Q({visible:!1,title:""}),q={id:void 0,formName:void 0,formType:"static",remork:void 0},O=Q({form:{...q},queryParams:{pageNum:1,pageSize:10,formName:void 0,formType:void 0},rules:{id:[{required:!0,message:"主键不能为空",trigger:"blur"}],formName:[{required:!0,message:"表单名称不能为空",trigger:"blur"}],formType:[{required:!0,message:"表单类型不能为空",trigger:"change"}],router:[{required:!0,message:"不能为空",trigger:"blur"}]}}),{queryParams:m,form:r,rules:W}=I(O),b=async()=>{V.value=!0;const n=await Le(m.value);D.value=n.rows,N.value=n.total,V.value=!1},X=()=>{F(),p.visible=!1},F=()=>{var n;r.value={...q},(n=E.value)==null||n.resetFields()},T=()=>{m.value.pageNum=1,b()},Y=()=>{var n;(n=$.value)==null||n.resetFields(),T()},J=n=>{M.value=n.map(l=>l.id),U.value=n.length!=1,R.value=!n.length},Z=()=>{F(),p.visible=!0,p.title="添加表单管理"},P=async n=>{F();const l=(n==null?void 0:n.id)||M.value[0],g=await ze(l);Object.assign(r.value,g.data),p.visible=!0,p.title="修改表单管理"},ee=()=>{var n;(n=E.value)==null||n.validate(async l=>{l&&(k.value=!0,r.value.id?await Ae(r.value).finally(()=>k.value=!1):await Ie(r.value).finally(()=>k.value=!1),s==null||s.$modal.msgSuccess("操作成功"),p.visible=!1,await b())})},x=async n=>{const l=(n==null?void 0:n.id)||M.value;await(s==null?void 0:s.$modal.confirm('是否确认删除表单管理编号为"'+l+'"的数据项？').finally(()=>V.value=!1)),await Qe(l),s==null||s.$modal.msgSuccess("删除成功"),await b()},ae=()=>{s==null||s.download("workflow/formManage/export",{...m.value},`formManage_${new Date().getTime()}.xlsx`)};return fe(()=>{b()}),(n,l)=>{var z,A;const g=Ve,v=he,i=Ce,B=Me,C=Ne,le=Be,oe=Ee,w=Fe,te=xe,L=Te,ne=Se,re=Pe,se=De,ie=Ue,me=Re,de=$e,y=_e("hasPermi"),ue=qe;return u(),G("div",Ge,[e(ve,{"enter-active-class":(z=a(s))==null?void 0:z.animate.searchAnimate.enter,"leave-active-class":(A=a(s))==null?void 0:A.animate.searchAnimate.leave},{default:o(()=>[c(K("div",Ke,[e(B,{ref_key:"queryFormRef",ref:$,model:a(m),inline:!0},{default:o(()=>[e(v,{label:"表单名称",prop:"formName"},{default:o(()=>[e(g,{modelValue:a(m).formName,"onUpdate:modelValue":l[0]||(l[0]=t=>a(m).formName=t),placeholder:"请输入表单名称",clearable:"",onKeyup:ge(T,["enter"])},null,8,["modelValue"])]),_:1}),e(v,null,{default:o(()=>[e(i,{type:"primary",icon:"Search",onClick:T},{default:o(()=>[f("搜索")]),_:1}),e(i,{icon:"Refresh",onClick:Y},{default:o(()=>[f("重置")]),_:1})]),_:1})]),_:1},8,["model"])],512),[[j,a(h)]])]),_:1},8,["enter-active-class","leave-active-class"]),e(se,{shadow:"never"},{header:o(()=>[e(oe,{gutter:10,class:"mb8"},{default:o(()=>[e(C,{span:1.5},{default:o(()=>[c((u(),_(i,{type:"primary",plain:"",icon:"Plus",onClick:Z},{default:o(()=>[f("新增")]),_:1})),[[y,["workflow:formManage:add"]]])]),_:1}),e(C,{span:1.5},{default:o(()=>[c((u(),_(i,{type:"success",plain:"",icon:"Edit",disabled:a(U),onClick:l[1]||(l[1]=t=>P())},{default:o(()=>[f("修改")]),_:1},8,["disabled"])),[[y,["workflow:formManage:edit"]]])]),_:1}),e(C,{span:1.5},{default:o(()=>[c((u(),_(i,{type:"danger",plain:"",icon:"Delete",disabled:a(R),onClick:l[2]||(l[2]=t=>x())},{default:o(()=>[f("删除")]),_:1},8,["disabled"])),[[y,["workflow:formManage:remove"]]])]),_:1}),e(C,{span:1.5},{default:o(()=>[c((u(),_(i,{type:"warning",plain:"",icon:"Download",onClick:ae},{default:o(()=>[f("导出")]),_:1})),[[y,["workflow:formManage:export"]]])]),_:1}),e(le,{showSearch:a(h),"onUpdate:showSearch":l[3]||(l[3]=t=>be(h)?h.value=t:null),onQueryTable:b},null,8,["showSearch"])]),_:1})]),default:o(()=>[c((u(),_(ne,{data:a(D),onSelectionChange:J},{default:o(()=>[e(w,{type:"selection",width:"55",align:"center"}),e(w,{label:"表单名称",align:"center",prop:"formName"}),e(w,{label:"表单类型",align:"center"},{default:o(t=>[e(te,{options:a(S),value:t.row.formType},null,8,["options","value"])]),_:1}),e(w,{label:"地址",align:"center",prop:"router"}),e(w,{label:"备注",align:"center",prop:"remork"}),e(w,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:o(t=>[e(L,{content:"修改",placement:"top"},{default:o(()=>[c(e(i,{link:"",type:"primary",icon:"Edit",onClick:pe=>P(t.row)},null,8,["onClick"]),[[y,["workflow:formManage:edit"]]])]),_:2},1024),e(L,{content:"删除",placement:"top"},{default:o(()=>[c(e(i,{link:"",type:"primary",icon:"Delete",onClick:pe=>x(t.row)},null,8,["onClick"]),[[y,["workflow:formManage:remove"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[ue,a(V)]]),c(e(re,{page:a(m).pageNum,"onUpdate:page":l[4]||(l[4]=t=>a(m).pageNum=t),limit:a(m).pageSize,"onUpdate:limit":l[5]||(l[5]=t=>a(m).pageSize=t),total:a(N),onPagination:b},null,8,["page","limit","total"]),[[j,a(N)>0]])]),_:1}),e(de,{modelValue:a(p).visible,"onUpdate:modelValue":l[12]||(l[12]=t=>a(p).visible=t),title:a(p).title,width:"500px","append-to-body":""},{footer:o(()=>[K("div",je,[e(i,{loading:a(k),type:"primary",onClick:ee},{default:o(()=>[f("确 定")]),_:1},8,["loading"]),e(i,{onClick:X},{default:o(()=>[f("取 消")]),_:1})])]),default:o(()=>[e(B,{ref_key:"formManageFormRef",ref:E,model:a(r),rules:a(W),"label-width":"80px"},{default:o(()=>[e(v,{label:"表单名称",prop:"formName"},{default:o(()=>[e(g,{modelValue:a(r).formName,"onUpdate:modelValue":l[6]||(l[6]=t=>a(r).formName=t),placeholder:"请输入表单名称"},null,8,["modelValue"])]),_:1}),e(v,{label:"表单类型",prop:"formType"},{default:o(()=>[e(me,{modelValue:a(r).formType,"onUpdate:modelValue":l[7]||(l[7]=t=>a(r).formType=t),onChange:l[8]||(l[8]=t=>a(r).router="")},{default:o(()=>[(u(!0),G(we,null,ye(a(S),t=>(u(),_(ie,{key:t.value,border:"",value:t.value},{default:o(()=>[f(ke(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r).formType==="static"?(u(),_(v,{key:0,label:"路由地址",prop:"router"},{default:o(()=>[e(g,{modelValue:a(r).router,"onUpdate:modelValue":l[9]||(l[9]=t=>a(r).router=t),placeholder:"请输入路由地址"},null,8,["modelValue"])]),_:1})):(u(),_(v,{key:1,label:"表单",prop:"router"},{default:o(()=>[e(g,{modelValue:a(r).router,"onUpdate:modelValue":l[10]||(l[10]=t=>a(r).router=t),disabled:"",placeholder:"请选择表单"},{append:o(()=>[e(i,{icon:"Search"})]),_:1},8,["modelValue"])]),_:1})),e(v,{label:"备注",prop:"remork"},{default:o(()=>[e(g,{modelValue:a(r).remork,"onUpdate:modelValue":l[11]||(l[11]=t=>a(r).remork=t),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{ua as default};
